/*! Uglyfied Quasar 2014-11-05 */
var QJSON=function(a,b){if(b){var c=localStorage.getItem(a);("undefined"==typeof c||null==c)&&(c={}),this.initialize(c)}else this.initialize(a)};QJSON.prototype={dataname:"",cache:{},initialize:function(a){a.constructor=="".constructor?this.load(a):this.cache=a},load:function(a){this.dataname=a,this.cache=JSON.parse(localStorage.getItem(a)),null===this.cache&&(this.cache={},this.save())},save:function(){localStorage.setItem(this.dataname,JSON.stringify(this.cache))},get:function(a){if("undefined"!=typeof this.cache[a])return this.cache[a];if(a.constructor==(new Number).constructor){var b=0;for(var c in this.cache){if(b==a)return this.cache[c];b++}}return null},swap:function(a,b){if(null!==this.get(a)&&null!==this.get(b)){var c=this.get(a);this.set(a,this.get(b)),this.set(b,c)}},set:function(a,b){this.cache[a]=b},add:function(a,b){this.set(a,b)},remove:function(a){var b={};for(var c in this.cache)c!==a&&(b[c]=this.cache[c]);this.cache=b},toString:function(){return JSON.stringify(this.cache)},toJSON:function(){return this.cache},contains:function(a){return"undefined"!=typeof this.cache[a]?!0:!1},length:function(){var a=0;for(var b in this.cache)a++;return a},first:function(){for(var a in this.cache)return this.cache[a]},firstKey:function(){for(var a in this.cache)return a},getIndexOf:function(a){var b=0;for(var c in this.cache){if(c==a)return b;b++}return null}},String.prototype.replaces=function(a,b){return this.replace(a,b)},String.prototype.replaceAll=function(a,b){for(var c=this,d=c.indexOf(a);d>-1;)c=c.replace(a,b),d=c.indexOf(a);return c},String.prototype.contains=function(a){return this.indexOf(a)>-1?!0:!1},function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){function b(b,d){var e,f,g,h=b.nodeName.toLowerCase();return"area"===h?(e=b.parentNode,f=e.name,b.href&&f&&"map"===e.nodeName.toLowerCase()?(g=a("img[usemap='#"+f+"']")[0],!!g&&c(g)):!1):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||d:d)&&c(b)}function c(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}a.ui=a.ui||{},a.extend(a.ui,{version:"1.11.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({scrollParent:function(b){var c=this.css("position"),d="absolute"===c,e=b?/(auto|scroll|hidden)/:/(auto|scroll)/,f=this.parents().filter(function(){var b=a(this);return d&&"static"===b.css("position")?!1:e.test(b.css("overflow")+b.css("overflow-y")+b.css("overflow-x"))}).eq(0);return"fixed"!==c&&f.length?f:a(this[0].ownerDocument||document)},uniqueId:function(){var a=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(c){return b(c,!isNaN(a.attr(c,"tabindex")))},tabbable:function(c){var d=a.attr(c,"tabindex"),e=isNaN(d);return(e||d>=0)&&b(c,!e)}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(b,c){function d(b,c,d,f){return a.each(e,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),f&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var e="Width"===c?["Left","Right"]:["Top","Bottom"],f=c.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+c]=function(b){return void 0===b?g["inner"+c].call(this):this.each(function(){a(this).css(f,d(this,b)+"px")})},a.fn["outer"+c]=function(b,e){return"number"!=typeof b?g["outer"+c].call(this,b):this.each(function(){a(this).css(f,d(this,b,!0,e)+"px")})}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData)),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.fn.extend({focus:function(b){return function(c,d){return"number"==typeof c?this.each(function(){var b=this;setTimeout(function(){a(b).focus(),d&&d.call(b)},c)}):b.apply(this,arguments)}}(a.fn.focus),disableSelection:function(){var a="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(a+".ui-disableSelection",function(a){a.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(b){if(void 0!==b)return this.css("zIndex",b);if(this.length)for(var c,d,e=a(this[0]);e.length&&e[0]!==document;){if(c=e.css("position"),("absolute"===c||"relative"===c||"fixed"===c)&&(d=parseInt(e.css("zIndex"),10),!isNaN(d)&&0!==d))return d;e=e.parent()}return 0}}),a.ui.plugin={add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c,d){var e,f=a.plugins[b];if(f&&(d||a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType))for(e=0;f.length>e;e++)a.options[f[e][0]]&&f[e][1].apply(a.element,c)}};var d=0,e=Array.prototype.slice;a.cleanData=function(b){return function(c){var d,e,f;for(f=0;null!=(e=c[f]);f++)try{d=a._data(e,"events"),d&&d.remove&&a(e).triggerHandler("remove")}catch(g){}b(c)}}(a.cleanData),a.widget=function(b,c,d){var e,f,g,h,i={},j=b.split(".")[0];return b=b.split(".")[1],e=j+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e.toLowerCase()]=function(b){return!!a.data(b,e)},a[j]=a[j]||{},f=a[j][b],g=a[j][b]=function(a,b){return this._createWidget?void(arguments.length&&this._createWidget(a,b)):new g(a,b)},a.extend(g,f,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),h=new c,h.options=a.widget.extend({},h.options),a.each(d,function(b,d){return a.isFunction(d)?void(i[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},e=function(a){return c.prototype[b].apply(this,a)};return function(){var b,c=this._super,f=this._superApply;return this._super=a,this._superApply=e,b=d.apply(this,arguments),this._super=c,this._superApply=f,b}}()):void(i[b]=d)}),g.prototype=a.widget.extend(h,{widgetEventPrefix:f?h.widgetEventPrefix||b:b},i,{constructor:g,namespace:j,widgetName:b,widgetFullName:e}),f?(a.each(f._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,g,c._proto)}),delete f._childConstructors):c._childConstructors.push(g),a.widget.bridge(b,g),g},a.widget.extend=function(b){for(var c,d,f=e.call(arguments,1),g=0,h=f.length;h>g;g++)for(c in f[g])d=f[g][c],f[g].hasOwnProperty(c)&&void 0!==d&&(b[c]=a.isPlainObject(d)?a.isPlainObject(b[c])?a.widget.extend({},b[c],d):a.widget.extend({},d):d);return b},a.widget.bridge=function(b,c){var d=c.prototype.widgetFullName||b;a.fn[b]=function(f){var g="string"==typeof f,h=e.call(arguments,1),i=this;return f=!g&&h.length?a.widget.extend.apply(null,[f].concat(h)):f,this.each(g?function(){var c,e=a.data(this,d);return"instance"===f?(i=e,!1):e?a.isFunction(e[f])&&"_"!==f.charAt(0)?(c=e[f].apply(e,h),c!==e&&void 0!==c?(i=c&&c.jquery?i.pushStack(c.get()):c,!1):void 0):a.error("no such method '"+f+"' for "+b+" widget instance"):a.error("cannot call methods on "+b+" prior to initialization; attempted to call method '"+f+"'")}:function(){var b=a.data(this,d);b?(b.option(f||{}),b._init&&b._init()):a.data(this,d,new c(f,this))}),i}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,c){c=a(c||this.defaultElement||this)[0],this.element=a(c),this.uuid=d++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=a(),this.hoverable=a(),this.focusable=a(),c!==this&&(a.data(c,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===c&&this.destroy()}}),this.document=a(c.style?c.ownerDocument:c.document||c),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(b,c){var d,e,f,g=b;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof b)if(g={},d=b.split("."),b=d.shift(),d.length){for(e=g[b]=a.widget.extend({},this.options[b]),f=0;d.length-1>f;f++)e[d[f]]=e[d[f]]||{},e=e[d[f]];if(b=d.pop(),1===arguments.length)return void 0===e[b]?null:e[b];e[b]=c}else{if(1===arguments.length)return void 0===this.options[b]?null:this.options[b];g[b]=c}return this._setOptions(g),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!b),b&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(b,c,d){var e,f=this;"boolean"!=typeof b&&(d=c,c=b,b=!1),d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget()),a.each(d,function(d,g){function h(){return b||f.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof g?f[g]:g).apply(f,arguments):void 0}"string"!=typeof g&&(h.guid=g.guid=g.guid||h.guid||a.guid++);var i=d.match(/^([\w:-]*)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.delegate(k,j,h):c.bind(j,h)})},_off:function(b,c){c=(c||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,b.unbind(c).undelegate(c),this.bindings=a(this.bindings.not(b).get()),this.focusable=a(this.focusable.not(b).get()),this.hoverable=a(this.hoverable.not(b).get())},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}}),a.widget;var f=!1;a(document).mouseup(function(){f=!1}),a.widget("ui.mouse",{version:"1.11.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!f){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var c=this,d=1===b.which,e="string"==typeof this.options.cancel&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;return d&&!e&&this._mouseCapture(b)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(b)!==!1,!this._mouseStarted)?(b.preventDefault(),!0):(!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return c._mouseMove(a)},this._mouseUpDelegate=function(a){return c._mouseUp(a)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),f=!0,!0)):!0}},_mouseMove:function(b){if(this._mouseMoved){if(a.ui.ie&&(!document.documentMode||9>document.documentMode)&&!b.button)return this._mouseUp(b);if(!b.which)return this._mouseUp(b)}return(b.which||b.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted)},_mouseUp:function(b){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),f=!1,!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),function(){function b(a,b,c){return[parseFloat(a[0])*(n.test(a[0])?b/100:1),parseFloat(a[1])*(n.test(a[1])?c/100:1)]}function c(b,c){return parseInt(a.css(b,c),10)||0}function d(b){var c=b[0];return 9===c.nodeType?{width:b.width(),height:b.height(),offset:{top:0,left:0}}:a.isWindow(c)?{width:b.width(),height:b.height(),offset:{top:b.scrollTop(),left:b.scrollLeft()}}:c.preventDefault?{width:0,height:0,offset:{top:c.pageY,left:c.pageX}}:{width:b.outerWidth(),height:b.outerHeight(),offset:b.offset()}}a.ui=a.ui||{};var e,f,g=Math.max,h=Math.abs,i=Math.round,j=/left|center|right/,k=/top|center|bottom/,l=/[\+\-]\d+(\.[\d]+)?%?/,m=/^\w+/,n=/%$/,o=a.fn.position;a.position={scrollbarWidth:function(){if(void 0!==e)return e;var b,c,d=a("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),f=d.children()[0];return a("body").append(d),b=f.offsetWidth,d.css("overflow","scroll"),c=f.offsetWidth,b===c&&(c=d[0].clientWidth),d.remove(),e=b-c},getScrollInfo:function(b){var c=b.isWindow||b.isDocument?"":b.element.css("overflow-x"),d=b.isWindow||b.isDocument?"":b.element.css("overflow-y"),e="scroll"===c||"auto"===c&&b.width<b.element[0].scrollWidth,f="scroll"===d||"auto"===d&&b.height<b.element[0].scrollHeight;return{width:f?a.position.scrollbarWidth():0,height:e?a.position.scrollbarWidth():0}},getWithinInfo:function(b){var c=a(b||window),d=a.isWindow(c[0]),e=!!c[0]&&9===c[0].nodeType;return{element:c,isWindow:d,isDocument:e,offset:c.offset()||{left:0,top:0},scrollLeft:c.scrollLeft(),scrollTop:c.scrollTop(),width:d||e?c.width():c.outerWidth(),height:d||e?c.height():c.outerHeight()}}},a.fn.position=function(e){if(!e||!e.of)return o.apply(this,arguments);e=a.extend({},e);var n,p,q,r,s,t,u=a(e.of),v=a.position.getWithinInfo(e.within),w=a.position.getScrollInfo(v),x=(e.collision||"flip").split(" "),y={};return t=d(u),u[0].preventDefault&&(e.at="left top"),p=t.width,q=t.height,r=t.offset,s=a.extend({},r),a.each(["my","at"],function(){var a,b,c=(e[this]||"").split(" ");1===c.length&&(c=j.test(c[0])?c.concat(["center"]):k.test(c[0])?["center"].concat(c):["center","center"]),c[0]=j.test(c[0])?c[0]:"center",c[1]=k.test(c[1])?c[1]:"center",a=l.exec(c[0]),b=l.exec(c[1]),y[this]=[a?a[0]:0,b?b[0]:0],e[this]=[m.exec(c[0])[0],m.exec(c[1])[0]]}),1===x.length&&(x[1]=x[0]),"right"===e.at[0]?s.left+=p:"center"===e.at[0]&&(s.left+=p/2),"bottom"===e.at[1]?s.top+=q:"center"===e.at[1]&&(s.top+=q/2),n=b(y.at,p,q),s.left+=n[0],s.top+=n[1],this.each(function(){var d,j,k=a(this),l=k.outerWidth(),m=k.outerHeight(),o=c(this,"marginLeft"),t=c(this,"marginTop"),z=l+o+c(this,"marginRight")+w.width,A=m+t+c(this,"marginBottom")+w.height,B=a.extend({},s),C=b(y.my,k.outerWidth(),k.outerHeight());"right"===e.my[0]?B.left-=l:"center"===e.my[0]&&(B.left-=l/2),"bottom"===e.my[1]?B.top-=m:"center"===e.my[1]&&(B.top-=m/2),B.left+=C[0],B.top+=C[1],f||(B.left=i(B.left),B.top=i(B.top)),d={marginLeft:o,marginTop:t},a.each(["left","top"],function(b,c){a.ui.position[x[b]]&&a.ui.position[x[b]][c](B,{targetWidth:p,targetHeight:q,elemWidth:l,elemHeight:m,collisionPosition:d,collisionWidth:z,collisionHeight:A,offset:[n[0]+C[0],n[1]+C[1]],my:e.my,at:e.at,within:v,elem:k})}),e.using&&(j=function(a){var b=r.left-B.left,c=b+p-l,d=r.top-B.top,f=d+q-m,i={target:{element:u,left:r.left,top:r.top,width:p,height:q},element:{element:k,left:B.left,top:B.top,width:l,height:m},horizontal:0>c?"left":b>0?"right":"center",vertical:0>f?"top":d>0?"bottom":"middle"};l>p&&p>h(b+c)&&(i.horizontal="center"),m>q&&q>h(d+f)&&(i.vertical="middle"),i.important=g(h(b),h(c))>g(h(d),h(f))?"horizontal":"vertical",e.using.call(this,a,i)}),k.offset(a.extend(B,{using:j}))})},a.ui.position={fit:{left:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollLeft:d.offset.left,f=d.width,h=a.left-b.collisionPosition.marginLeft,i=e-h,j=h+b.collisionWidth-f-e;b.collisionWidth>f?i>0&&0>=j?(c=a.left+i+b.collisionWidth-f-e,a.left+=i-c):a.left=j>0&&0>=i?e:i>j?e+f-b.collisionWidth:e:i>0?a.left+=i:j>0?a.left-=j:a.left=g(a.left-h,a.left)},top:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollTop:d.offset.top,f=b.within.height,h=a.top-b.collisionPosition.marginTop,i=e-h,j=h+b.collisionHeight-f-e;b.collisionHeight>f?i>0&&0>=j?(c=a.top+i+b.collisionHeight-f-e,a.top+=i-c):a.top=j>0&&0>=i?e:i>j?e+f-b.collisionHeight:e:i>0?a.top+=i:j>0?a.top-=j:a.top=g(a.top-h,a.top)}},flip:{left:function(a,b){var c,d,e=b.within,f=e.offset.left+e.scrollLeft,g=e.width,i=e.isWindow?e.scrollLeft:e.offset.left,j=a.left-b.collisionPosition.marginLeft,k=j-i,l=j+b.collisionWidth-g-i,m="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,n="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,o=-2*b.offset[0];0>k?(c=a.left+m+n+o+b.collisionWidth-g-f,(0>c||h(k)>c)&&(a.left+=m+n+o)):l>0&&(d=a.left-b.collisionPosition.marginLeft+m+n+o-i,(d>0||l>h(d))&&(a.left+=m+n+o))},top:function(a,b){var c,d,e=b.within,f=e.offset.top+e.scrollTop,g=e.height,i=e.isWindow?e.scrollTop:e.offset.top,j=a.top-b.collisionPosition.marginTop,k=j-i,l=j+b.collisionHeight-g-i,m="top"===b.my[1],n=m?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,o="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,p=-2*b.offset[1];0>k?(d=a.top+n+o+p+b.collisionHeight-g-f,a.top+n+o+p>k&&(0>d||h(k)>d)&&(a.top+=n+o+p)):l>0&&(c=a.top-b.collisionPosition.marginTop+n+o+p-i,a.top+n+o+p>l&&(c>0||l>h(c))&&(a.top+=n+o+p))}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments),a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments),a.ui.position.fit.top.apply(this,arguments)}}},function(){var b,c,d,e,g,h=document.getElementsByTagName("body")[0],i=document.createElement("div");b=document.createElement(h?"div":"body"),d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},h&&a.extend(d,{position:"absolute",left:"-1000px",top:"-1000px"});for(g in d)b.style[g]=d[g];b.appendChild(i),c=h||document.documentElement,c.insertBefore(b,c.firstChild),i.style.cssText="position: absolute; left: 10.7432222px;",e=a(i).offset().left,f=e>10&&11>e,b.innerHTML="",c.removeChild(b)}()}(),a.ui.position,a.widget("ui.sortable",a.ui.mouse,{version:"1.11.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(a,b,c){return a>=b&&b+c>a},_isFloating:function(a){return/left|right/.test(a.css("float"))||/inline|table-cell/.test(a.css("display"))},_create:function(){var a=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===a.axis||this._isFloating(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(a,b){this._super(a,b),"handle"===a&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),a.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(b,c){var d=null,e=!1,f=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(b),a(b.target).parents().each(function(){return a.data(this,f.widgetName+"-item")===f?(d=a(this),!1):void 0}),a.data(b.target,f.widgetName+"-item")===f&&(d=a(b.target)),d&&(!this.options.handle||c||(a(this.options.handle,d).find("*").addBack().each(function(){this===b.target&&(e=!0)}),e))?(this.currentItem=d,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(b,c,d){var e,f,g=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,g.cursorAt&&this._adjustOffsetFromHelper(g.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),g.containment&&this._setContainment(),g.cursor&&"auto"!==g.cursor&&(f=this.document.find("body"),this.storedCursor=f.css("cursor"),f.css("cursor",g.cursor),this.storedStylesheet=a("<style>*{ cursor: "+g.cursor+" !important; }</style>").appendTo(f)),g.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",g.opacity)),g.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",g.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!d)for(e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("activate",b,this._uiHash(this));return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(b),!0},_mouseDrag:function(b){var c,d,e,f,g=this.options,h=!1;for(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<g.scrollSensitivity?this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop+g.scrollSpeed:b.pageY-this.overflowOffset.top<g.scrollSensitivity&&(this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop-g.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<g.scrollSensitivity?this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft+g.scrollSpeed:b.pageX-this.overflowOffset.left<g.scrollSensitivity&&(this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft-g.scrollSpeed)):(b.pageY-a(document).scrollTop()<g.scrollSensitivity?h=a(document).scrollTop(a(document).scrollTop()-g.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<g.scrollSensitivity&&(h=a(document).scrollTop(a(document).scrollTop()+g.scrollSpeed)),b.pageX-a(document).scrollLeft()<g.scrollSensitivity?h=a(document).scrollLeft(a(document).scrollLeft()-g.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<g.scrollSensitivity&&(h=a(document).scrollLeft(a(document).scrollLeft()+g.scrollSpeed))),h!==!1&&a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),c=this.items.length-1;c>=0;c--)if(d=this.items[c],e=d.item[0],f=this._intersectsWithPointer(d),f&&d.instance===this.currentContainer&&e!==this.currentItem[0]&&this.placeholder[1===f?"next":"prev"]()[0]!==e&&!a.contains(this.placeholder[0],e)&&("semi-dynamic"===this.options.type?!a.contains(this.element[0],e):!0)){if(this.direction=1===f?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(d))break;this._rearrange(b,d),this._trigger("change",b,this._uiHash());break}return this._contactContainers(b),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,c){if(b){if(a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b),this.options.revert){var d=this,e=this.placeholder.offset(),f=this.options.axis,g={};f&&"x"!==f||(g.left=e.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),f&&"y"!==f||(g.top=e.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,a(this.helper).animate(g,parseInt(this.options.revert,10)||500,function(){d._clear(b)})}else this._clear(b,c);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var b=this.containers.length-1;b>=0;b--)this.containers[b]._trigger("deactivate",null,this._uiHash(this)),this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",null,this._uiHash(this)),this.containers[b].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[\-=_](.+)/);c&&d.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))}),!d.length&&b.key&&d.push(b.key+"="),d.join("&")},toArray:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},c.each(function(){d.push(a(b.item||this).attr(b.attribute||"id")||"")}),d},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,i=h+a.height,j=this.offset.click.top,k=this.offset.click.left,l="x"===this.options.axis||d+j>h&&i>d+j,m="y"===this.options.axis||b+k>f&&g>b+k,n=l&&m;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?n:b+this.helperProportions.width/2>f&&g>c-this.helperProportions.width/2&&d+this.helperProportions.height/2>h&&i>e-this.helperProportions.height/2},_intersectsWithPointer:function(a){var b="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,a.top,a.height),c="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,a.left,a.width),d=b&&c,e=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return d?this.floating?f&&"right"===f||"down"===e?2:1:e&&("down"===e?2:1):!1},_intersectsWithSides:function(a){var b=this._isOverAxis(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height),c=this._isOverAxis(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width),d=this._getDragVerticalDirection(),e=this._getDragHorizontalDirection();return this.floating&&e?"right"===e&&c||"left"===e&&!c:d&&("down"===d&&b||"up"===d&&!b)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!==a&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!==a&&(a>0?"right":"left")},refresh:function(a){return this._refreshItems(a),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor===String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){function c(){h.push(this)}var d,e,f,g,h=[],i=[],j=this._connectWith();if(j&&b)for(d=j.length-1;d>=0;d--)for(f=a(j[d]),e=f.length-1;e>=0;e--)g=a.data(f[e],this.widgetFullName),g&&g!==this&&!g.options.disabled&&i.push([a.isFunction(g.options.items)?g.options.items.call(g.element):a(g.options.items,g.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),g]);for(i.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),d=i.length-1;d>=0;d--)i[d][0].each(c);
return a(h)},_removeCurrentsFromItems:function(){var b=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=a.grep(this.items,function(a){for(var c=0;b.length>c;c++)if(b[c]===a.item[0])return!1;return!0})},_refreshItems:function(b){this.items=[],this.containers=[this];var c,d,e,f,g,h,i,j,k=this.items,l=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],m=this._connectWith();if(m&&this.ready)for(c=m.length-1;c>=0;c--)for(e=a(m[c]),d=e.length-1;d>=0;d--)f=a.data(e[d],this.widgetFullName),f&&f!==this&&!f.options.disabled&&(l.push([a.isFunction(f.options.items)?f.options.items.call(f.element[0],b,{item:this.currentItem}):a(f.options.items,f.element),f]),this.containers.push(f));for(c=l.length-1;c>=0;c--)for(g=l[c][1],h=l[c][0],d=0,j=h.length;j>d;d++)i=a(h[d]),i.data(this.widgetName+"-item",g),k.push({item:i,instance:g,width:0,height:0,left:0,top:0})},refreshPositions:function(b){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var c,d,e,f;for(c=this.items.length-1;c>=0;c--)d=this.items[c],d.instance!==this.currentContainer&&this.currentContainer&&d.item[0]!==this.currentItem[0]||(e=this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item,b||(d.width=e.outerWidth(),d.height=e.outerHeight()),f=e.offset(),d.left=f.left,d.top=f.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(c=this.containers.length-1;c>=0;c--)f=this.containers[c].element.offset(),this.containers[c].containerCache.left=f.left,this.containers[c].containerCache.top=f.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight();return this},_createPlaceholder:function(b){b=b||this;var c,d=b.options;d.placeholder&&d.placeholder.constructor!==String||(c=d.placeholder,d.placeholder={element:function(){var d=b.currentItem[0].nodeName.toLowerCase(),e=a("<"+d+">",b.document[0]).addClass(c||b.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===d?b.currentItem.children().each(function(){a("<td>&#160;</td>",b.document[0]).attr("colspan",a(this).attr("colspan")||1).appendTo(e)}):"img"===d&&e.attr("src",b.currentItem.attr("src")),c||e.css("visibility","hidden"),e},update:function(a,e){(!c||d.forcePlaceholderSize)&&(e.height()||e.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10)))}}),b.placeholder=a(d.placeholder.element.call(b.element,b.currentItem)),b.currentItem.after(b.placeholder),d.placeholder.update(b,b.placeholder)},_contactContainers:function(b){var c,d,e,f,g,h,i,j,k,l,m=null,n=null;for(c=this.containers.length-1;c>=0;c--)if(!a.contains(this.currentItem[0],this.containers[c].element[0]))if(this._intersectsWith(this.containers[c].containerCache)){if(m&&a.contains(this.containers[c].element[0],m.element[0]))continue;m=this.containers[c],n=c}else this.containers[c].containerCache.over&&(this.containers[c]._trigger("out",b,this._uiHash(this)),this.containers[c].containerCache.over=0);if(m)if(1===this.containers.length)this.containers[n].containerCache.over||(this.containers[n]._trigger("over",b,this._uiHash(this)),this.containers[n].containerCache.over=1);else{for(e=1e4,f=null,k=m.floating||this._isFloating(this.currentItem),g=k?"left":"top",h=k?"width":"height",l=k?"clientX":"clientY",d=this.items.length-1;d>=0;d--)a.contains(this.containers[n].element[0],this.items[d].item[0])&&this.items[d].item[0]!==this.currentItem[0]&&(i=this.items[d].item.offset()[g],j=!1,b[l]-i>this.items[d][h]/2&&(j=!0),e>Math.abs(b[l]-i)&&(e=Math.abs(b[l]-i),f=this.items[d],this.direction=j?"up":"down"));if(!f&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[n])return void(this.currentContainer.containerCache.over||(this.containers[n]._trigger("over",b,this._uiHash()),this.currentContainer.containerCache.over=1));f?this._rearrange(b,f,null,!0):this._rearrange(b,null,this.containers[n].element,!0),this._trigger("change",b,this._uiHash()),this.containers[n]._trigger("change",b,this._uiHash(this)),this.currentContainer=this.containers[n],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[n]._trigger("over",b,this._uiHash(this)),this.containers[n].containerCache.over=1}},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):"clone"===c.helper?this.currentItem.clone():this.currentItem;return d.parents("body").length||a("parent"!==c.appendTo?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]),d[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!d[0].style.width||c.forceHelperSize)&&d.width(this.currentItem.width()),(!d[0].style.height||c.forceHelperSize)&&d.height(this.currentItem.height()),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options;"parent"===e.containment&&(e.containment=this.helper[0].parentNode),("document"===e.containment||"window"===e.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a("document"===e.containment?document:window).width()-this.helperProportions.width-this.margins.left,(a("document"===e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(e.containment)||(b=a(e.containment)[0],c=a(e.containment).offset(),d="hidden"!==a(b).css("overflow"),this.containment=[c.left+(parseInt(a(b).css("borderLeftWidth"),10)||0)+(parseInt(a(b).css("paddingLeft"),10)||0)-this.margins.left,c.top+(parseInt(a(b).css("borderTopWidth"),10)||0)+(parseInt(a(b).css("paddingTop"),10)||0)-this.margins.top,c.left+(d?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(a(b).css("borderLeftWidth"),10)||0)-(parseInt(a(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,c.top+(d?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(a(b).css("borderTopWidth"),10)||0)-(parseInt(a(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"===b?1:-1,e="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*d,left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d}},_generatePosition:function(b){var c,d,e=this.options,f=b.pageX,g=b.pageY,h="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(h[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top)),e.grid&&(c=this.originalPageY+Math.round((g-this.originalPageY)/e.grid[1])*e.grid[1],g=this.containment?c-this.offset.click.top>=this.containment[1]&&c-this.offset.click.top<=this.containment[3]?c:c-this.offset.click.top>=this.containment[1]?c-e.grid[1]:c+e.grid[1]:c,d=this.originalPageX+Math.round((f-this.originalPageX)/e.grid[0])*e.grid[0],f=this.containment?d-this.offset.click.left>=this.containment[0]&&d-this.offset.click.left<=this.containment[2]?d:d-this.offset.click.left>=this.containment[0]?d-e.grid[0]:d+e.grid[0]:d)),{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():i?0:h.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():i?0:h.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?b.item[0]:b.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var e=this.counter;this._delay(function(){e===this.counter&&this.refreshPositions(!d)})},_clear:function(a,b){function c(a,b,c){return function(d){c._trigger(a,d,b._uiHash(b))}}this.reverting=!1;var d,e=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(d in this._storedCSS)("auto"===this._storedCSS[d]||"static"===this._storedCSS[d])&&(this._storedCSS[d]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!b&&e.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||b||e.push(function(a){this._trigger("update",a,this._uiHash())}),this!==this.currentContainer&&(b||(e.push(function(a){this._trigger("remove",a,this._uiHash())}),e.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.currentContainer)),e.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer)))),d=this.containers.length-1;d>=0;d--)b||e.push(c("deactivate",this,this.containers[d])),this.containers[d].containerCache.over&&(e.push(c("out",this,this.containers[d])),this.containers[d].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,b||this._trigger("beforeStop",a,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!b){for(d=0;e.length>d;d++)e[d].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}}),a.widget("ui.tabs",{version:"1.11.2",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var a=/#.*$/;return function(b){var c,d;b=b.cloneNode(!1),c=b.href.replace(a,""),d=location.href.replace(a,"");try{c=decodeURIComponent(c)}catch(e){}try{d=decodeURIComponent(d)}catch(e){}return b.hash.length>1&&c===d}}(),_create:function(){var b=this,c=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",c.collapsible),this._processTabs(),c.active=this._initialActive(),a.isArray(c.disabled)&&(c.disabled=a.unique(c.disabled.concat(a.map(this.tabs.filter(".ui-state-disabled"),function(a){return b.tabs.index(a)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(c.active):a(),this._refresh(),this.active.length&&this.load(c.active)},_initialActive:function(){var b=this.options.active,c=this.options.collapsible,d=location.hash.substring(1);return null===b&&(d&&this.tabs.each(function(c,e){return a(e).attr("aria-controls")===d?(b=c,!1):void 0}),null===b&&(b=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===b||-1===b)&&(b=this.tabs.length?0:!1)),b!==!1&&(b=this.tabs.index(this.tabs.eq(b)),-1===b&&(b=c?!1:0)),!c&&b===!1&&this.anchors.length&&(b=0),b},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):a()}},_tabKeydown:function(b){var c=a(this.document[0].activeElement).closest("li"),d=this.tabs.index(c),e=!0;if(!this._handlePageNav(b)){switch(b.keyCode){case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:d++;break;case a.ui.keyCode.UP:case a.ui.keyCode.LEFT:e=!1,d--;break;case a.ui.keyCode.END:d=this.anchors.length-1;break;case a.ui.keyCode.HOME:d=0;break;case a.ui.keyCode.SPACE:return b.preventDefault(),clearTimeout(this.activating),void this._activate(d);case a.ui.keyCode.ENTER:return b.preventDefault(),clearTimeout(this.activating),void this._activate(d===this.options.active?!1:d);default:return}b.preventDefault(),clearTimeout(this.activating),d=this._focusNextTab(d,e),b.ctrlKey||(c.attr("aria-selected","false"),this.tabs.eq(d).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",d)},this.delay))}},_panelKeydown:function(b){this._handlePageNav(b)||b.ctrlKey&&b.keyCode===a.ui.keyCode.UP&&(b.preventDefault(),this.active.focus())},_handlePageNav:function(b){return b.altKey&&b.keyCode===a.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):b.altKey&&b.keyCode===a.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(b,c){function d(){return b>e&&(b=0),0>b&&(b=e),b}for(var e=this.tabs.length-1;-1!==a.inArray(d(),this.options.disabled);)b=c?b+1:b-1;return b},_focusNextTab:function(a,b){return a=this._findNextTab(a,b),this.tabs.eq(a).focus(),a},_setOption:function(a,b){return"active"===a?void this._activate(b):"disabled"===a?void this._setupDisabled(b):(this._super(a,b),"collapsible"===a&&(this.element.toggleClass("ui-tabs-collapsible",b),b||this.options.active!==!1||this._activate(0)),"event"===a&&this._setupEvents(b),void("heightStyle"===a&&this._setupHeightStyle(b)))},_sanitizeSelector:function(a){return a?a.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var b=this.options,c=this.tablist.children(":has(a[href])");b.disabled=a.map(c.filter(".ui-state-disabled"),function(a){return c.index(a)}),this._processTabs(),b.active!==!1&&this.anchors.length?this.active.length&&!a.contains(this.tablist[0],this.active[0])?this.tabs.length===b.disabled.length?(b.active=!1,this.active=a()):this._activate(this._findNextTab(Math.max(0,b.active-1),!1)):b.active=this.tabs.index(this.active):(b.active=!1,this.active=a()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var b=this,c=this.tabs,d=this.anchors,e=this.panels;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(b){a(this).is(".ui-state-disabled")&&b.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){a(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return a("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=a(),this.anchors.each(function(c,d){var e,f,g,h=a(d).uniqueId().attr("id"),i=a(d).closest("li"),j=i.attr("aria-controls");b._isLocal(d)?(e=d.hash,g=e.substring(1),f=b.element.find(b._sanitizeSelector(e))):(g=i.attr("aria-controls")||a({}).uniqueId()[0].id,e="#"+g,f=b.element.find(e),f.length||(f=b._createPanel(g),f.insertAfter(b.panels[c-1]||b.tablist)),f.attr("aria-live","polite")),f.length&&(b.panels=b.panels.add(f)),j&&i.data("ui-tabs-aria-controls",j),i.attr({"aria-controls":g,"aria-labelledby":h}),f.attr("aria-labelledby",h)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel"),c&&(this._off(c.not(this.tabs)),this._off(d.not(this.anchors)),this._off(e.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(b){return a("<div>").attr("id",b).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(b){a.isArray(b)&&(b.length?b.length===this.anchors.length&&(b=!0):b=!1);for(var c,d=0;c=this.tabs[d];d++)b===!0||-1!==a.inArray(d,b)?a(c).addClass("ui-state-disabled").attr("aria-disabled","true"):a(c).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=b},_setupEvents:function(b){var c={};b&&a.each(b.split(" "),function(a,b){c[b]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(a){a.preventDefault()}}),this._on(this.anchors,c),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(b){var c,d=this.element.parent();"fill"===b?(c=d.height(),c-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var b=a(this),d=b.css("position");"absolute"!==d&&"fixed"!==d&&(c-=b.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){c-=a(this).outerHeight(!0)}),this.panels.each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")):"auto"===b&&(c=0,this.panels.each(function(){c=Math.max(c,a(this).height("").height())}).height(c))},_eventHandler:function(b){var c=this.options,d=this.active,e=a(b.currentTarget),f=e.closest("li"),g=f[0]===d[0],h=g&&c.collapsible,i=h?a():this._getPanelForTab(f),j=d.length?this._getPanelForTab(d):a(),k={oldTab:d,oldPanel:j,newTab:h?a():f,newPanel:i};b.preventDefault(),f.hasClass("ui-state-disabled")||f.hasClass("ui-tabs-loading")||this.running||g&&!c.collapsible||this._trigger("beforeActivate",b,k)===!1||(c.active=h?!1:this.tabs.index(f),this.active=g?a():f,this.xhr&&this.xhr.abort(),j.length||i.length||a.error("jQuery UI Tabs: Mismatching fragment identifier."),i.length&&this.load(this.tabs.index(f),b),this._toggle(b,k))},_toggle:function(b,c){function d(){f.running=!1,f._trigger("activate",b,c)}function e(){c.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),g.length&&f.options.show?f._show(g,f.options.show,d):(g.show(),d())}var f=this,g=c.newPanel,h=c.oldPanel;this.running=!0,h.length&&this.options.hide?this._hide(h,this.options.hide,function(){c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),e()}):(c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),h.hide(),e()),h.attr("aria-hidden","true"),c.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),g.length&&h.length?c.oldTab.attr("tabIndex",-1):g.length&&this.tabs.filter(function(){return 0===a(this).attr("tabIndex")}).attr("tabIndex",-1),g.attr("aria-hidden","false"),c.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(b){var c,d=this._findActive(b);d[0]!==this.active[0]&&(d.length||(d=this.active),c=d.find(".ui-tabs-anchor")[0],this._eventHandler({target:c,currentTarget:c,preventDefault:a.noop}))},_findActive:function(b){return b===!1?a():this.tabs.eq(b)},_getIndex:function(a){return"string"==typeof a&&(a=this.anchors.index(this.anchors.filter("[href$='"+a+"']"))),a},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tablist.unbind(this.eventNamespace),this.tabs.add(this.panels).each(function(){a.data(this,"ui-tabs-destroy")?a(this).remove():a(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var b=a(this),c=b.data("ui-tabs-aria-controls");c?b.attr("aria-controls",c).removeData("ui-tabs-aria-controls"):b.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(b){var c=this.options.disabled;c!==!1&&(void 0===b?c=!1:(b=this._getIndex(b),c=a.isArray(c)?a.map(c,function(a){return a!==b?a:null}):a.map(this.tabs,function(a,c){return c!==b?c:null})),this._setupDisabled(c))},disable:function(b){var c=this.options.disabled;if(c!==!0){if(void 0===b)c=!0;else{if(b=this._getIndex(b),-1!==a.inArray(b,c))return;c=a.isArray(c)?a.merge([b],c).sort():[b]}this._setupDisabled(c)}},load:function(b,c){b=this._getIndex(b);var d=this,e=this.tabs.eq(b),f=e.find(".ui-tabs-anchor"),g=this._getPanelForTab(e),h={tab:e,panel:g};this._isLocal(f[0])||(this.xhr=a.ajax(this._ajaxSettings(f,c,h)),this.xhr&&"canceled"!==this.xhr.statusText&&(e.addClass("ui-tabs-loading"),g.attr("aria-busy","true"),this.xhr.success(function(a){setTimeout(function(){g.html(a),d._trigger("load",c,h)},1)}).complete(function(a,b){setTimeout(function(){"abort"===b&&d.panels.stop(!1,!0),e.removeClass("ui-tabs-loading"),g.removeAttr("aria-busy"),a===d.xhr&&delete d.xhr},1)})))},_ajaxSettings:function(b,c,d){var e=this;return{url:b.attr("href"),beforeSend:function(b,f){return e._trigger("beforeLoad",c,a.extend({jqXHR:b,ajaxSettings:f},d))}}},_getPanelForTab:function(b){var c=a(b).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+c))}}),a.widget("ui.tooltip",{version:"1.11.2",options:{content:function(){var b=a(this).attr("title")||"";return a("<a>").text(b).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_addDescribedBy:function(b,c){var d=(b.attr("aria-describedby")||"").split(/\s+/);d.push(c),b.data("ui-tooltip-id",c).attr("aria-describedby",a.trim(d.join(" ")))},_removeDescribedBy:function(b){var c=b.data("ui-tooltip-id"),d=(b.attr("aria-describedby")||"").split(/\s+/),e=a.inArray(c,d);-1!==e&&d.splice(e,1),b.removeData("ui-tooltip-id"),d=a.trim(d.join(" ")),d?b.attr("aria-describedby",d):b.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable(),this.liveRegion=a("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body)},_setOption:function(b,c){var d=this;return"disabled"===b?(this[c?"_disable":"_enable"](),void(this.options[b]=c)):(this._super(b,c),void("content"===b&&a.each(this.tooltips,function(a,b){d._updateContent(b.element)})))},_disable:function(){var b=this;a.each(this.tooltips,function(c,d){var e=a.Event("blur");e.target=e.currentTarget=d.element[0],b.close(e,!0)}),this.element.find(this.options.items).addBack().each(function(){var b=a(this);b.is("[title]")&&b.data("ui-tooltip-title",b.attr("title")).removeAttr("title")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var b=a(this);b.data("ui-tooltip-title")&&b.attr("title",b.data("ui-tooltip-title"))})},open:function(b){var c=this,d=a(b?b.target:this.element).closest(this.options.items);d.length&&!d.data("ui-tooltip-id")&&(d.attr("title")&&d.data("ui-tooltip-title",d.attr("title")),d.data("ui-tooltip-open",!0),b&&"mouseover"===b.type&&d.parents().each(function(){var b,d=a(this);d.data("ui-tooltip-open")&&(b=a.Event("blur"),b.target=b.currentTarget=this,c.close(b,!0)),d.attr("title")&&(d.uniqueId(),c.parents[this.id]={element:this,title:d.attr("title")},d.attr("title",""))}),this._updateContent(d,b))},_updateContent:function(a,b){var c,d=this.options.content,e=this,f=b?b.type:null;return"string"==typeof d?this._open(b,a,d):(c=d.call(a[0],function(c){a.data("ui-tooltip-open")&&e._delay(function(){b&&(b.type=f),this._open(b,a,c)})}),void(c&&this._open(b,a,c)))},_open:function(b,c,d){function e(a){k.of=a,g.is(":hidden")||g.position(k)}var f,g,h,i,j,k=a.extend({},this.options.position);if(d){if(f=this._find(c))return void f.tooltip.find(".ui-tooltip-content").html(d);c.is("[title]")&&(b&&"mouseover"===b.type?c.attr("title",""):c.removeAttr("title")),f=this._tooltip(c),g=f.tooltip,this._addDescribedBy(c,g.attr("id")),g.find(".ui-tooltip-content").html(d),this.liveRegion.children().hide(),d.clone?(j=d.clone(),j.removeAttr("id").find("[id]").removeAttr("id")):j=d,a("<div>").html(j).appendTo(this.liveRegion),this.options.track&&b&&/^mouse/.test(b.type)?(this._on(this.document,{mousemove:e}),e(b)):g.position(a.extend({of:c},this.options.position)),g.hide(),this._show(g,this.options.show),this.options.show&&this.options.show.delay&&(i=this.delayedShow=setInterval(function(){g.is(":visible")&&(e(k.of),clearInterval(i))},a.fx.interval)),this._trigger("open",b,{tooltip:g}),h={keyup:function(b){if(b.keyCode===a.ui.keyCode.ESCAPE){var d=a.Event(b);d.currentTarget=c[0],this.close(d,!0)}}},c[0]!==this.element[0]&&(h.remove=function(){this._removeTooltip(g)}),b&&"mouseover"!==b.type||(h.mouseleave="close"),b&&"focusin"!==b.type||(h.focusout="close"),this._on(!0,c,h)}},close:function(b){var c,d=this,e=a(b?b.currentTarget:this.element),f=this._find(e);f&&(c=f.tooltip,f.closing||(clearInterval(this.delayedShow),e.data("ui-tooltip-title")&&!e.attr("title")&&e.attr("title",e.data("ui-tooltip-title")),this._removeDescribedBy(e),f.hiding=!0,c.stop(!0),this._hide(c,this.options.hide,function(){d._removeTooltip(a(this))}),e.removeData("ui-tooltip-open"),this._off(e,"mouseleave focusout keyup"),e[0]!==this.element[0]&&this._off(e,"remove"),this._off(this.document,"mousemove"),b&&"mouseleave"===b.type&&a.each(this.parents,function(b,c){a(c.element).attr("title",c.title),delete d.parents[b]}),f.closing=!0,this._trigger("close",b,{tooltip:c}),f.hiding||(f.closing=!1)))},_tooltip:function(b){var c=a("<div>").attr("role","tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||"")),d=c.uniqueId().attr("id");return a("<div>").addClass("ui-tooltip-content").appendTo(c),c.appendTo(this.document[0].body),this.tooltips[d]={element:b,tooltip:c}},_find:function(a){var b=a.data("ui-tooltip-id");return b?this.tooltips[b]:null},_removeTooltip:function(a){a.remove(),delete this.tooltips[a.attr("id")]},_destroy:function(){var b=this;a.each(this.tooltips,function(c,d){var e=a.Event("blur"),f=d.element;e.target=e.currentTarget=f[0],b.close(e,!0),a("#"+c).remove(),f.data("ui-tooltip-title")&&(f.attr("title")||f.attr("title",f.data("ui-tooltip-title")),f.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}})}),Quasar={config:{version:"2.2.2805",name:"Quasar",author:"Wesley Nascimento",get:function(a,b){var c=new QJSON(game_data.player.name);return null===c.get(a)?b:c.get(a)},set:function(a,b){var c=new QJSON(game_data.player.name);c.set(a,b),c.save()}},"interface":{cache:{},menu:{$buttons:null,$infos:null,$menu:null,$countDown:$("#countDown"),isPaused:!1,ticker:[],init:function(){premium||Quasar.interface.menu.premiumChanges(),$("#quasar_menu").length>0&&$("#quasar_menu").remove(),$("body").append('<section id="quasar_menu" class="quasar" style="display:none;"></section>'),this.$menu=$("#quasar_menu"),this.addHTML('<div id="quasarTitle" class="title">'+Quasar.config.name+"</br>v"+Quasar.config.version+"</div>"),this.addHTML('<div id="quasarCount" class="section"><div id="countDown" class="timer" style="color: #9E0000; font-weight: 700; text-align: center; font-size: 14px;cursor: pointer;">00:00:00</div></div>'),this.addHTML('<div id="quasarButtons" class="section"></div>'),this.addHTML('<div id="quasarInfo" class="section"></div>'),this.addHTML('<div id="quasarSlide" class="slider">&raquo;</div>'),this.$buttons=$("#quasarButtons"),this.$infos=$("#quasarInfo"),this.$countDown=$("#countDown");var a=this;this.$countDown.on("click",function(){var b=a.isPaused;a.isPaused=b?!1:!0,UI.SuccessMessage(b?"O temporarizador retornou ao normal.":"O temporarizador foi pausado.")}),this.addButton(Quasar.lang.get("auto_farm"),Quasar.farm),this.addButton(Quasar.lang.get("wall_drop"),Quasar.wall),this.addButton(Quasar.lang.get("auto_recruit"),Quasar.train),this.addButton(Quasar.lang.get("auto_build"),Quasar.main),this.addButton(Quasar.lang.get("am_farm"),Quasar.am_farm),this.addButton(Quasar.lang.get("dodge"),Quasar.dodge),this.addButton(Quasar.lang.get("coordinator"),Quasar.coordinator),this.addButton(Quasar.lang.get("anti_afk"),Quasar.nucleo),this.addActionButton(Quasar.lang.get("import_export"),function(){var a="";
a+="Importe e exporte os dados do seu Quasar e configuraes.",a+="<table><tr>",a+='<td><input type="text" value="" id="import_val" placeholder="Importar codigo de configuraes" size="20"><input type="button" value="Importar" id="btn_import"></td>',a+='<td><input type="text" value="" id="export_val" placeholder="Exportar configuraes" size="20"><input type="button" value="Exportar" id="btn_export"></td>',a+="</tr></table>";var b=function(){$("#btn_import").on("click",function(){var a=$("#import_val").val();""!==a&&Quasar.nucleo.importData(a)}),$("#btn_export").on("click",function(){var a=Quasar.nucleo.exportData();$("#export_val").val(a),$("#export_val").focus(),$("#export_val").select()})};Quasar.interface.menu.popupBox(Quasar.lang.get("import_export"),a,400,null,b)}),this.addActionButton(Quasar.lang.get("welcome_window"),Quasar.interface.menu.showWelcome),this.addActionButton(Quasar.lang.get("configuration"),function(){var a=Quasar.interface.menu.configDraw,b=Quasar.interface.menu.configHtml();Quasar.interface.menu.popupBox(Quasar.lang.get("configuration"),b,400,null,a)}),this.addInformation("Ping","ping",function(){null==Quasar.interface.cache.$ping&&(Quasar.interface.cache.$ping=$("#ping"));var a=Quasar.config.get("pings",[]);Quasar.interface.cache.$ping.text(a[a.length-1]+"ms")}),this.addInformation("Ping Mdio","aping",function(){null==Quasar.interface.cache.$aping&&(Quasar.interface.cache.$aping=$("#aping"));var a,b=Quasar.config.get("pings",[]);if(3==b.length){for(var c=0,d=b.length-1;d>b.length-4;d--)c+=Number(b[d]);a=Math.round(c/3)+"ms"}else a="Calc...";Quasar.interface.cache.$aping.text(a)}),this.addInformation(Quasar.lang.get("attacks_today"),"attackcount",function(){null==Quasar.interface.cache.$attackcount&&(Quasar.interface.cache.$attackcount=$("#attackcount"));var a=new QJSON("attacks",!0),b=$("#serverDate").text();a.contains(b)||(a.add(b,0),Quasar.config.set("attacks",a.toJSON()));var c=a.get(b);Quasar.interface.cache.$attackcount.text(c)},function(){var a=Quasar.lang.get("attacks_today"),b="";b+='<table class="vis nowrap tall" style="width: 100%"><tbody><tr><th>Date</th><th>Attacks</th></tr>';var c=new QJSON("attacks",!0);for(var d in c.cache)b+="<tr><td>"+d+"</td><td>"+c.get(d)+"</td></tr>";b+="</tbody></table>",Quasar.interface.menu.popupBox(a,b,400,null,null)});var b=Quasar.config.get("slider",!0);this.showHideMenu(b),$("#quasarSlide").on("click",function(){var a=Quasar.config.get("slider",!0);Quasar.config.set("slider",!a),Quasar.interface.menu.showHideMenu(!a)}),$("#quasarLoading").fadeOut("slow"),$("#quasar_menu").show(),this.tick()},addHTML:function(a){this.$menu.append(a)},addButton:function(a,b){b.$element=$('<div class="button">'+a+"</div>"),this.$buttons.append(b.$element);var c=function(){b.getStatus()?b.$element.addClass("active"):b.$element.removeClass("active")};b.$element.on("click",function(){var a=b.getStatus();b.setStatus(!a),c()}),c()},addActionButton:function(a,b){var c=$('<div class="button action">'+a+"</div>");c.on("click",b),this.$buttons.append(c)},addInformation:function(a,b,c,d){"undefined"==typeof d?this.$infos.append("<div><b>"+a+'</b>: <span id="'+b+'"></span></div>'):(this.$infos.append("<div><b>"+a+'</b>: <span id="'+b+'" style="font-weight: 700;color: #603000;"></span></div>'),$("#"+b).on("click",d)),"undefined"!=typeof c&&this.ticker.push(c)},countDown:function(a,b){return 0>a?void b():(Quasar.interface.menu.isPaused||(this.$countDown.text(Quasar.utils.secToString(a)),--a),void setTimeout(function(){Quasar.interface.menu.countDown(a,b)},1e3))},popupBox:function(a,b,c,d,e){var f=$("#quasar_popup");if(f.length>0)return void f.fadeTo(500,0,function(){f.remove(),Quasar.interface.menu.popupBox(a,b,c,d,e)});$("body").append('<div id="quasar_popup" class="popup_style ui-draggable" style="position: fixed;"></div>');var g=$("#quasar_popup");g.append('<div class="popup_menu"><span style="float: left;">'+a+'</span><a href="javascript:void(0);" id="closePop">x</a></div>'),$("#closePop").on("click",Quasar.interface.menu.closePop),g.draggable(),g.append('<div class="popup_content">'+b+"</div>"),null!==c?g.css("width",c):g.css("width","auto"),null!==d?g.css("height",d):g.css("height","auto");var h=window.innerWidth/2-c/2,i=window.innerHeight/2-parseInt(g.css("height"))/2;g.css("left",h),g.css("top",i>10?i:10),null!==e&&e(),g.fadeTo(500,1)},closePop:function(){var a=$("#quasar_popup");a.fadeTo(500,0,function(){a.remove()})},showHideMenu:function(a){{var b=$("#quasar_menu");$("#quasarSlide")}a?b.animate({left:"0px"},500):b.animate({left:"-143px"},500)},tick:function(){setTimeout(function(){Quasar.interface.menu.tick()},1e3);for(var a=0;a<this.ticker.length;a++)this.ticker[a]()},premiumChanges:function(){var a=game_data.screen,b=Quasar.utils.getNextVillage(),c=Quasar.utils.getPrevVillage();$("#menu_row2").prepend('<td class="box-item icon-box separate arrowCell" style="display:none;"><a id="village_switch_left" class="village_switch_link" href="?village='+c+"&screen="+a+'" accesskey="a"><span class="arrowLeft"> </span></a></td><td class="box-item icon-box arrowCell" style="display:none;"><a id="village_switch_right" class="village_switch_link" href="?village='+b+"&screen="+a+'" accesskey="d"><span class="arrowRight"> </span></a></td>'),$(".box-item").show(1e3)},configDraw:function(){$("#langSelect").val(Quasar.config.get("language","en")),$("#save").on("click",function(){Quasar.config.set("language",$("#langSelect").val()),Quasar.config.set("min_rand",$("#min_rand").val()),Quasar.config.set("max_rand",$("#max_rand").val()),Quasar.config.set("max_recruit_time",$("#max_recruit_time").val());var a=premium?5:2;Number($("#max_build_queue").val())<=a&&Quasar.config.set("max_build_queue",$("#max_build_queue").val()),Quasar.config.set("am_is_by_ratio",$("#am_is_by_ratio").is(":checked")),Quasar.config.set("attack_control",$("#attack_control").is(":checked")),Quasar.config.set("am_dis_ratio",$("#am_dis_ratio").val()),Quasar.config.set("max_am_dis",$("#max_am_dis").val()),Quasar.config.set("max_am_attacks",$("#max_am_attacks").val()),Quasar.config.set("blue_reports",$("#blue_reports").is(":checked")),Quasar.config.set("yellow_reports",$("#yellow_reports").is(":checked")),Quasar.config.set("use_c_am",$("#use_c_am").is(":checked")),Quasar.config.set("stop_end_farm",$("#stop_end_farm").is(":checked")),Quasar.config.set("max_am_wall",$("#max_am_wall").val()),Quasar.config.set("wall_drop_spy",$("#wall_drop_spy").val()),Quasar.config.set("wall_drop_ram",$("#wall_drop_ram").val()),Quasar.config.set("wall_drop_axe",$("#wall_drop_axe").val()),Quasar.config.set("delete_most_attacked",$("#delete_most_attacked").val()),Quasar.config.set("sound_alarm",$("#sound_alarm").is(":checked"));var b=$("#dodge_target").val();Quasar.config.set("dodge_target",""!==b?b:null),UI.SuccessMessage("Suas configuraes foram salvas!")});var a=$("#tabs");a.tabs(),a.tooltip({position:{my:"left+15 center",at:"right center",using:function(a){var b=$(this);b.css(a),b.css("z-index",1e5)}},tooltipClass:"tooltip-style",track:!0})},configHtml:function(){var a="",b="";a+='<div id="tabs">',a+="<ul>",a+='<li><a href="#tab-geral">Geral</a></li>',a+='<li><a href="#tab-as">Auto AS</a></li>',a+='<li><a href="#tab-wall">Muralha</a></li>',a+="</ul>",b+="<select id='langSelect'>";for(var c in Quasar.lang)"undefined"!=typeof Quasar.lang[c].language&&(b+="<option value='"+c+"'>"+Quasar.lang[c].language+"</option>");return b+="</select>",a+='<div id="tab-geral">',a+='<table class="vis" style="width:100%"><tbody>',a+="<tr><th>Descrio</th><th>Valor</th></tr>",a+='<tr><td colspan="2"><strong>Geral</strong></td></tr>',a+="<tr><td>Linguagem: </td><td>"+b+"</td></tr>",a+='<tr><td><span title="Define o tempo minimo em que o sistema gera o temporalizador aleatorio.">Tempo minimo para o temporalizador: </span></td><td><input type="text" id="min_rand" size="2" value="'+Quasar.config.get("min_rand",300)+'"/>segundos</td></tr>',a+='<tr><td><span title="Define o tempo maximo em que o sistema gera o temporalizador aleatorio.">Tempo maximo para o temporalizador: </span></td><td><input type="text" id="max_rand" size="2" value="'+Quasar.config.get("max_rand",900)+'"/>segundos</td></tr>',a+='<tr><td><span title="Define o tempo maximo da fila de recrutamento do Recrutador. Caso a fila esteja maior que esse limite, ele no ir recrutar.">Tempo maximo de recrutamento: </span></td><td><input type="text" id="max_recruit_time" size="2" value="'+Quasar.config.get("max_recruit_time",8)+'"/> horas</td></tr>',a+='<tr><td><span title="Define a quantidade maxima de edificios que sero colocados na fila de recrutamento ao mesmo tempo.">Quantidade maxima de edificios na fila: </span></td><td><input type="text" id="max_build_queue" size="2" value="'+Quasar.config.get("max_build_queue",premium?5:2)+'"/></td></tr>',a+='<tr><td><span title="Usando o Farmador, deseja parar de farmar assim que estiver no final da lista de coordenadas?">Parar de farmar ao chegar no fim da lista: </span></td><td><input type="checkbox" id="stop_end_farm" '+(Quasar.config.get("stop_end_farm",!1)?"checked":"")+"/></td></tr>",a+='<tr><td>Tocar alarm quando aparecer um Captcha: </td><td><input type="checkbox" id="sound_alarm" '+(Quasar.config.get("sound_alarm",!0)?"checked":"")+"/></td></tr>",a+='<tr><td><span title="Define alvo para o dodge. O Dodge funciona apenas com uma aldeia.">Alvo para dodge: </span></td><td><input type="text" placeholder="123|456" id="dodge_target" size="3" value="'+Quasar.config.get("dodge_target","")+'"/></td></tr>',a+="</tbody></table>",a+="</div>",a+='<div id="tab-as">',a+='<table class="vis" style="width:100%"><tbody>',a+="<tr><th>Descrio</th><th>Valor</th></tr>",a+='<tr><td colspan="2"><strong>Assistente de Saque</strong></td></tr>',a+='<tr><td><span title="Define a distancia maxima em que o Auto AS enviar um ataques.">Distancia de ataques maxima:</span></td><td><input type="text" id="max_am_dis" size="2" value="'+Quasar.config.get("max_am_dis",20)+'"/>campos</td></tr>',a+='<tr><td><span title="Deseja que o Auto AS defina automaticamente quantos ataques pode ser enviado a uma aldeia baseado em sua distancia?">Usar sistema de razo?</span></td><td><input type="checkbox" id="am_is_by_ratio" '+(Quasar.config.get("am_is_by_ratio",!1)?"checked":"")+"/></td></tr>",a+='<tr><td><span title="Define quantos ataques podem ser enviados para cada campo de distancia. Pode ser um valor decimal ou inteiro.">Ataque por campo: </span></td><td><input type="text" id="am_dis_ratio" size="2" value="'+Quasar.config.get("am_dis_ratio",1)+'"/>(Ex: 0.2)</td></tr>',a+='<tr><td><span title="Deseja que o Auto AS priorize a atacar aldeias que tenham menos ataques a caminho?">Usar controlador de ataques? </span></td><td><input type="checkbox" id="attack_control" '+(Quasar.config.get("attack_control",!1)?"checked":"")+"/></td></tr>",a+='<tr><td><span title="Define a quantidade maximas de ataques que sero enviadas a uma unica aldeia.">Quantidade maxima de ataques: </span></td><td><input type="text" id="max_am_attacks" size="2" value="'+Quasar.config.get("max_am_attacks",2)+'"/></td></tr>',a+='<tr><td><span title="Define o nivel maximo de muralha aceito para que seja atacado.">Nivel maximo de muralha:</span></td><td><input type="text" id="max_am_wall" size="2" value="'+Quasar.config.get("max_am_wall",3)+'"/></td></tr>',a+='<tr><td><span title="Deseja atacar aldeias cujo o ultimo relatorio foi de explorao?">Atacar relatorios de explorao? </span></td><td><input type="checkbox" id="blue_reports" '+(Quasar.config.get("blue_reports",!1)?"checked":"")+"/></td></tr>",a+='<tr><td><span title="Deseja que o Auto AS adicione automaticamente relatorios amarelos ou em que a muralha seja maior que o limite para a lista de aldeias em que a muralha deve ser derrubada?">Adicionar ao Derrubador de Muralhas?</span></td><td><input type="checkbox" id="yellow_reports" '+(Quasar.config.get("yellow_reports",!0)?"checked":"")+"/></td></tr>",a+='<tr><td><span title="Deseja que o Auto AS use o Template C para farma? S so atacadas aldeias em que a soma dos recursos  maior que 1000.">Usar o templace C?:</span></td><td><input type="checkbox" id="use_c_am" '+(Quasar.config.get("use_c_am",!0)?"checked":"")+"/></td></tr>",a+='<tr><td><span title="Deseja deletar aldeias em que o limite de ataques simultaneos j foi atingido? Isso libera mais espao na pagina do AS.">Deletar ataques acima do limite?:</span></td><td><input type="checkbox" id="delete_most_attacked" '+(Quasar.config.get("delete_most_attacked",!1)?"checked":"")+"/></td></tr>",a+="</tbody></table>",a+="</div>",a+='<div id="tab-wall">',a+='<table class="vis" style="width:100%"><tbody>',a+="<tr><th>Descrio</th><th>Valor</th></tr>",a+='<tr><td colspan="2"><strong>Configuraes do Derrubador de Muralhas</strong></td></tr>',a+='<tr><td><span title="Quantidade de exploradores a enviar">Exploradores:</span></td><td><input type="text" id="wall_drop_spy" size="2" value="'+Quasar.config.get("wall_drop_spy",1)+'"/></td></tr>',a+='<tr><td><span title="Quantidade de Arietes a enviar">Arietes:</span></td><td><input type="text" id="wall_drop_ram" size="2" value="'+Quasar.config.get("wall_drop_ram",15)+'"/></td></tr>',a+='<tr><td><span title="Quantidade de Barbaros a enviar">Barbaros:</span></td><td><input type="text" id="wall_drop_axe" size="2" value="'+Quasar.config.get("wall_drop_axe",30)+'"/></td></tr>',a+="</tbody></table>",a+="</div>",a+="</div>",a+="<div>",a+='<input  class="btn" type="button" id="save" value="Salvar"/>',a+="</div>"},showWelcome:function(){var a="";a+="<span style='size: 16px; font-weight: bold'>Sobre o Quasar.</span></br>",a+="Quasar  formado por um conjunto de ferramentas, cujo o intuito  fazer com que seja mais pratico jogar TribalWars.</br>",a+="Algumas dessas ferramentas so ilegais segundo as regras do jogo, esteja ciente que o mal uso ou uso excessivo pode causar o banimento de sua conta.</br>",a+="Quasar tem sido desenvolvido por <strong>Wesley Nascimento</strong> desde Novembro de 2013. E vem sido distribuido dentro da licensa Creative Commons.</br>",a+="<br><strong style='size: 16px; font-weight: bold'>Termos de uso e Politica de privacidade</strong></br>",a+="<ul>",a+="<li>O author no se resposabiliza por punies ou banimentos.</li>",a+="<li>Quasar envia informaoes anonimas sobre seu uso para um servidor externo.</li>",a+="<li>O author no garante suporte ao projeto a longo prazo.</li>",a+="<li>O author se reserva ao direito de mudar esses termos a qualquer momento sem aviso previo ou posterior.</li>",a+="<li>Quasar armazena informaes e configuraes em seu navegador.</li>",a+="</ul>",a+="<span style='color:#c00; font-weight: bold'>Ao usar o Quasar voc automaticamente est ciente e concorda com todos os termos listados acima.</span></br>",a+="<br><span style='size: 16px; font-weight: bold'>Terminando a instalao</span></br>",a+="Para que voc possa executar o Quasar sem problemas ou conflitos  preciso que ele obtenha algumas informaes da sua conta.</br>",a+="<ul>",a+="<li>Quantidade de aldeias.</li>",a+="<li>Identificao das aldeias.</li>",a+="<li>Se possui conta premium.</li>",a+="<li>Se possui assistente de saques.</li>",a+="<li>Quantidade de ataques chegando.</li>",a+="<li>Se est em modo de ferias.</li>",a+="<li>Se est como sitter.</li>",a+="</ul>",a+="<br>Essas informaes sero obtidas automaticamente ao clicar no boto abaixo. Ateno voc ser redirecionado para outra pagina.</br>",a+="<center><a href='#' id='btn_first_use' class='evt-confirm btn'>Configurar</a></center></br>",a+='<center><a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/"><img alt="Licena Creative Commons" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/4.0/88x31.png" /></a><br /><span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">Quasar</span> de <a xmlns:cc="http://creativecommons.org/ns#" href="wesleynascimento.com/quasar" property="cc:attributionName" rel="cc:attributionURL">wesleynascimento.com/quasar</a> est licenciado com uma Licena <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">Creative Commons - Atribuio-NoComercial 4.0 Internacional</a>.</center>';var b=function(){$("#btn_first_use").on("click",function(){if(0===game_data.player.sitter)location.href="?village="+game_data.village.id+"&screen=overview_villages&mode=prod";else{var a=location.href.match(/t=\d+/i);location.href="?village="+game_data.village.id+"&screen=overview_villages&mode=prod&"+a}})};Quasar.interface.menu.popupBox("Bem vindo ao Quasar!",a,600,null,b)}},praca:function(){var a='<table width="100%" class="paris-badge">';a+='<tr><td width="100%">',a+='<input type="text" id="coords" name="name" value="" style="width: 98%;" placeholder="Cole coordenadas para darmar aqui (ex: 666|666 666|666)">',a+="</td><td>",a+='Em <span id="current">0</span> de <span id="number">0</span> coordenadas',a+="</td></tr>",a+="<tr><td>",a+='<input type="text" id="wall_coords" name="name" value="" style="width: 98%;" placeholder="Cole coordenadas para o derrubador de muralha (ex: 666|666 666|666)">',a+="</td><td>",a+='<span id="wall_number">0</span> coordenadas',a+="</td></tr>",a+="</table>";var b=$(a),c=$('<table class="content-border vis nowrap tall" width="100%" id="build_script" style="opacity:0"><tr><th style="width: 66%">'+Quasar.lang.get("option")+' [ <a id="ordenar">'+Quasar.lang.get("order")+'</a> | <a id="limpar">'+Quasar.lang.get("clean")+'</a> ]</th></tr><tr><td id="body" style="padding: 10px 5px;"></td></tr></table></br>');c.find("#body").append(b),$("#contentContainer").before(c);var d=$("#coords"),e=$("#number"),f=$("#wall_coords"),g=$("#wall_number"),h=Quasar.config.get("index_"+game_data.village.id,0);$("#current").text(h);var i=Quasar.config.get("coords_"+game_data.village.id,[]);d.val(i.join(" ")),e.text(i.length),d.on("change",function(){var a=ele_coords.val().split(" ");e.text(a.length),Quasar.config.set("coords_"+game_data.village.id,a)});var j=Quasar.config.get("wall_coords",[]);f.val(j.join(" ")),g.text(j.length),f.on("change",function(){var a=f.val().split(" ");g.text(a.length),Quasar.config.set("wall_coords",a)}),$("#ordenar").on("click",function(){var a=game_data.village.coord,b=Quasar.utils.orderByDis(a,d.val());d.val(b.join(" ")),e.text(b.length),Quasar.config.set("coords_"+game_data.village.id,b)}),$("#limpar").on("click",function(){var a=Quasar.utils.clean(d.val());d.val(a.join(" ")),e.text(a.length),Quasar.config.set("coords_"+game_data.village.id,a)}),$("#btnOptions").on("click",function(){var a=Quasar.lang.get("option")+" - "+Quasar.lang.get("break_Wall"),b="";Quasar.interface.menu.popupBox(a,b,600,null,null)}),$("#build_script").fadeTo(1e3,1)},ed_principal:{start:function(){var a=$("#build_script");a.length>0&&(a.remove(),$("#img_addBuild").remove()),$("#buildings tr").each(function(a){var b=$(this);if(0==a||b.find("td:eq(1) .inactive").length>0)return b.append("<td></td>"),!0;var c=b.attr("id");b.append("<td id='img_addBuild'><img class='build_cancel' data-ed='"+c+"' title='"+Quasar.lang.get("add_icon_title")+"' src='/graphic/overview/build.png'></img></td>")});var b=$('<div style="margin-bottom: 10px"><table id="build_script" style="opacity:0" class="content-border vis nowrap tall" width="100%"><tr><th style="width: 66%">'+Quasar.lang.get("builds")+'(<span id="number"></span>) [ <a id="mostrar">'+Quasar.lang.get("show_link")+'</a> | <a id="limpar">'+Quasar.lang.get("clean")+'</a> | <a id="ordenar">'+Quasar.lang.get("order")+'</a>]</th></tr><tr><td id="main_order"></td></tr></table></div><div style="display:none; margin-bottom: 10px"><table id="sortable-list" class="content-border vis nowrap tall" width="100%" style="border-spacing: 2px !important;"></table></div>');$("#contentContainer").before(b),$("#mostrar").on("click",function(){var a=$("#sortable-list").parent(),b=$(this);b.text()==Quasar.lang.get("show_link")?(a.slideDown(),b.text(Quasar.lang.get("hide_link"))):(a.slideUp(),b.text(Quasar.lang.get("show_link")))}),$("#limpar").on("click",function(){Quasar.config.set("queue_"+game_data.village.id,[]),Quasar.main.load()}),$("#ordenar").on("click",function(){Quasar.main.order()}),$("#build_script").fadeTo(1e3,1)},addBuildIcon:function(){$("#img_addBuild img").on("click",function(){var a,b=Quasar.config.get("queue_"+game_data.village.id,[]),c=$(this).attr("data-ed").replace("main_buildrow_","");if(a="undefined"!=typeof Quasar.main.niveis[c]?Quasar.main.niveis[c]+1:Quasar.main.getCurrentNivel(c)+1,a>Quasar.game.builds[c].max)return void UI.ErrorMessage("Edificil j atingiu nivel maximo.");b.push(c),Quasar.config.set("queue_"+game_data.village.id,b),Quasar.main.load(),UI.SuccessMessage("Adicionado "+c+" nivel "+a+" a fila do construtor.");var d=Quasar.utils.stringToSec($("#countDown").text());0>=d&&Quasar.main.getStatus()&&Quasar.utils.setReload("&screen=main")})},cleanTables:function(){var a=$("#sortable-list");a.html("");var b="<tr>";b+='<th style="width: 23%">'+Quasar.lang.get("build_queue")+"</th>",b+="<th>"+Quasar.lang.get("build_level")+"</th>",b+='<th colspan="3">'+Quasar.lang.get("price")+"</th>",b+="<th></th>",b+="<th></th>",b+="<th></th>",b+="</tr>",$("#newNivel").remove(),a.append(b)},makeSortable:function(){$("#sortable-list tbody").sortable({forcePlaceholderSize:!0,cursor:"move",revert:!0,tolerance:"pointer",stop:function(){var a=$(this).sortable("toArray");a.shift(),Quasar.config.set("queue_"+game_data.village.id,a),Quasar.main.load()}}).disableSelection()},addToList:function(a,b,c){var d=Quasar.game.builds[a],e=d.name,f=parseInt(d.wood*Math.pow(d.fwood,b-1)),g=parseInt(d.stone*Math.pow(d.fstone,b-1)),h=parseInt(d.iron*Math.pow(d.firon,b-1)),i=parseInt(d.pop*Math.pow(d.fpop,b-1))-parseInt(d.pop*Math.pow(d.fpop,b-2)),j="";j+='<tr id="'+a+'" class="sortable_row">',j+='<td><img src="graphic/buildings/mid/'+a+'1.png" class="bmain_list_img"><a href="?village=43158&screen='+a+'">'+e+"</a></td>",j+='<td class="paris-badge">'+Quasar.lang.get("build_level")+" "+b+"</td>",j+='<td><span class="icon header wood"></span>'+f+"</td>",j+='<td><span class="icon header stone"></span>'+g+"</td>",j+='<td><span class="icon header iron"></span>'+h+"</td>",j+='<td><span class="icon header population"></span>'+i+"</td>",j+='<td><img class="tool_icon icon header" id="remove" data-ed="'+c+'" title="'+Quasar.lang.get("remove_icon_title")+'" src="/graphic/forum/thread_delete.png" /></td>',j+='<td><img src="/graphic/sorthandle.png" style="width: 11px; height:11px; ursor:pointer" id="move" data-ed="'+c+'" /></td>',j+="</tr>",$("#sortable-list").append(j),$("#main_order").append('<img src="/graphic/buildings/mid/'+a+'1.png" style="margin-left: 5px;">');var k=$("#main_buildrow_"+a).find("span:eq(0)");k.find("#newNivel").length>0?k.find("#newNivel").text(" - ("+b+")"):k.append('<span style="font-size: 0.9em; color: #000AFF;" id="newNivel"> - ('+b+")</span>"),$("#sortable-list #remove").last().on("click",function(){var a=Number($(this).attr("data-ed")),b=Quasar.config.get("queue_"+game_data.village.id,[]);b.splice(a,1),Quasar.config.set("queue_"+game_data.village.id,b),Quasar.main.load(),UI.SuccessMessage(a+" removido do construtor.")})}},coordinator:{start:function(){var a="";a+='<table class="vis" width="327" id="coordinator_table">',a+="<tbody>",a+="<tr>",a+='<th colspan="2">',a+="Coordenador",a+="</th>",a+="</tr>",a+="<tr>",a+="<td>Data e Horario:</td>",a+="<td>",a+='<span id="preview" style="display: none">'+Quasar.coordinator.TIMESTAMP_FORMAT()+"</span>",a+='<input type="text" id="edit">',a+='<a href="#" id="toggle"><img src="graphic/rename.png?1" alt="umbenennen" title="umbenennen"></a>',a+="</td>",a+="</tr>",a+="<tr>",a+='<td><span title="Determine se o horario  o de envio ou de chegada do ataque.">Tipo de envio:<span></td>';var b='<select id="type_sched">';b+='<option value="0">Hora de chegada</option>',b+='<option value="1">Hora de envio</option>',b+="</select>",a+="<td>"+b+"</td>",a+="</tr>",a+="<tr>",a+='<td colspan="2"><span title="Deseja que o Coordenador calcule o delay de sua internet para aumentar a preciso dp ataques?">Usar ping atual como base de envio?<span></td>',a+="</tr>",a+="<tr>",a+='<td colspan="2"><span title="Deseja que o Coordenador mantenha esse ataques como prioridade? Ou seja, case seja um NT esse ataque vai ser o primeiro a ser enviado.">Enviar como prioridade?<span></td>',a+="</tr>",a+="<tr>",a+="<td>Contagem: </td>",a+='<td><span id="countDown_attack">00:00:00</span></td>',a+="</tr>",a+="</tbody>",a+="</table>";var c=$(a),d=$('<input type="button" class="btn btn-attack" value="Coordenar Envio">'),e=$("#command-confirm-form");e.find("table:eq(0)").after(c),e.append(d);var f=$("#toggle"),g=$("#preview"),h=$("#edit");f.on("click",function(){h.is(":visible")?(h.hide(),g.show(),Quasar.coordinator.type=0):(h.show(),g.hide())});var i=e.find("table:eq(0) tr:eq(2) td:eq(1)").text();d.on("click",function(){var a={time:$("#edit").val(),type:$("#type_sched").val(),duration:i};Quasar.coordinator.createSchedule(a)}),$("#coordinator_table").tooltip({position:{my:"left+15 center",at:"right center",using:function(a){var b=$(this);b.css(a),b.css("z-index",1e5)}},tooltipClass:"tooltip-style",track:!0}),$.getScript(Loader.host+"/jquery.datetimepicker.js",function(){var a={value:Quasar.coordinator.TIMESTAMP_FORMAT(),format:"H:i:s d/m/Y",formatDate:"d/m/Y",formatTime:"H:i:s",minDate:0,step:5};$("#edit").datetimepicker(a)})}}},nucleo:{init:function(){if(console.log("Started"),Quasar.captcha.hasCaptcha())return $("body").append('<object height="50" width="100" data="'+Loader.host+'/alarm.mp3"></object>'),void $(document).prop("title","Preencher Captcha");if(Quasar.lang.init(),null===Quasar.config.get("last_version_used",null)){if("overview_villages"==game_data.screen)return Quasar.overview_villages.saveVillages(),UI.SuccessMessage("Quasar obteve informaes obre sua conta e est pronto para uso!"),void Quasar.config.set("last_version_used",Quasar.config.version);Quasar.interface.menu.showWelcome()}else if(Quasar.config.get("last_version_used","")!==Quasar.config.version)UI.SuccessMessage("Detectado uma nova verso do Quasar instalado!"),Quasar.config.set("last_version_used",Quasar.config.version);else{var a=new QJSON("villages",!0),b=game_data.village.coord;a.contains(b)||(a.set(b,game_data.village.id),Quasar.config.set("villages",a.toJSON()))}var c=location.href;Quasar.config.set("total_execucoes",Quasar.config.get("total_execucoes",0)+1);var d=Loader.timeEnd-Loader.timeStart,e=Quasar.config.get("pings",[]);switch(e.push(d),e.length>3&&e.shift(),Quasar.config.set("pings",e),10==Quasar.utils.random(0,10)&&Quasar.nucleo.abrirPaginaAleatoria(),game_data.screen){case"place":$("#troop_confirm_go").length>0?Quasar.coordinator.getStatus()?Quasar.coordinator.init():Quasar.farm.doConfirm():location.href.indexOf("target")>0||(null===game_data.mode||"command"==game_data.mode)&&(game_data.premium&&Quasar.map.updateAR(),null!==Quasar.config.get("before_dodge_page",null)?Quasar.config.set("before_dodge_page",null):Quasar.farm.init()||Quasar.wall.init()||Quasar.farm_post.init(),Quasar.interface.praca());break;case"map":Quasar.map.init();break;case"overview":Quasar.overview.init(),Quasar.dodge.init();break;case"train":Quasar.train.init();break;case"main":Quasar.main.init();break;case"am_farm":Quasar.am_farm.init();break;case"overview_villages":if("prod"==game_data.mode)Quasar.overview_villages.saveVillages();else if("incomings"==game_data.mode&&location.href.indexOf("subtype=attacks")>0){var f=Quasar.config.get("before_identify_page",null);null!==f&&(Quasar.config.set("before_identify_page",null),location.href=f)}break;case"report":c.contains("&view=")&&Quasar.report.view()}Quasar.interface.menu.init(),Quasar.dodge.renameAttacks()},getStatus:function(){return Quasar.config.get("anti_afk",!0)},setStatus:function(a){},abrirPaginaAleatoria:function(){var a=this.getStatus();if(Quasar.config.set("count",0),a){var b="?village="+game_data.village.id+"&screen=",c=["forum","ally","ranking","ranking&mode=con_player","market","smith","statue","farm","barracks","stable","garage","storage","hide","wall"],d=Quasar.utils.random(0,c.length-1),e=c[d];$.get(b+e,function(){})}},importData:function(a){localStorage.setItem(game_data.player.name,a),Loader.goTo()},exportData:function(){return localStorage.getItem(game_data.player.name)}},captcha:{init:function(){this.pageInject(),this.bind()},hasCaptcha:function(){return $("#bot_check_image").length>0},bind:function(){$("#bot_check_form").submit(function(a){a.preventDefault(),code=$("#bot_check_code").val(),$("#bot_check_code").val(""),url="game.php",game_data.player.sitter>0&&(url+="?t="+game_data.player.id),$.post(url,{bot_check_code:code},function(a){alert(a),a.error?($("#bot_check_error").show().text(a.error),$("#bot_check_image").attr("src",function(){var a=$(this).attr("src");return a+="&"+(new Date).getTime()})):location.href=""},"json")})},pageInject:function(){$(document).prop("title","Preencher Captcha");var a=Loader.host+"/alarm.mp3",b=50,c=new Audio;c.src=a,c.volume=b/100,Quasar.config.get("sound_alarm",!0)&&(window.setInterval(c.play,3e4),c.play())}},coordinator:{init:function(){Quasar.interface.coordinator.start()},startTimer:function(a,b,c,d,e,f){if(!(Quasar.utils.IsNumeric(a.val())&&Quasar.utils.IsNumeric(b.val())&&Quasar.utils.IsNumeric(c.val())&&Quasar.utils.IsNumeric(d.val())))return void alert("Erro no formato do texto");var g=new Date,h=new Date;h.setMilliseconds(d.val()),h.setMinutes(b.val()),h.setSeconds(c.val()),h.setHours(a.val()),e.text(h.toTimeString()),e.show(),f.hide(),setTimeout(function(){console.log("Attacked"),$("#troop_confirm_go").click()},h.getTime()-g.getTime())},createSchedule:function(a){console.log(a.time),console.log(a.type),console.log(a.duration)},currentTime:function(){$sd=$("#serverDate"),$st=$("#serverTime");var a=$sd.text().split("/");return new Date(a[1]+"/"+a[0]+"/"+a[2]+" "+$st.text()).getTime()},TIMESTAMP_FORMAT:function(a){a||(a=this.currentTime());var b=new Date(a),c=b.getHours(),d=b.getMinutes(),e=b.getSeconds(),f=b.getDate(),g=b.getMonth()+1,h=b.getFullYear();return c=10>c?"0"+c:c,d=10>d?"0"+d:d,e=10>e?"0"+e:e,f=10>f?"0"+f:f,g=10>g?"0"+g:g,c+":"+d+":"+e+" "+f+"/"+g+"/"+h},FORMAT_TIMESTAMP:function(a){var b=a.split(" "),c=b[1].split("/");return a=b[0],new Date(c[1]+"/"+c[0]+"/"+c[2]+" "+a).getTime()},getStatus:function(){return Quasar.config.get("coordinator",!1)},setStatus:function(a){Quasar.config.set("coordinator",a)}},main:{niveis:{},init:function(){Quasar.interface.ed_principal.start();var a=BuildingMain.update_all;BuildingMain.update_all=function(b){a(b),console.log("Building Update event"),Quasar.main.start()},this.start(),Quasar.utils.setReload("&screen=main")},start:function(){Quasar.interface.ed_principal.addBuildIcon(),this.load(),this.build()},build:function(){if(Quasar.main.getStatus()){var a=Quasar.config.get("queue_"+game_data.village.id,[]);if(a.length>0){var b=a[0];$("#main_buildlink_"+b).is(":visible")&&BuildingMain.order_count<this.getMax()&&(a.shift(),Quasar.config.set("queue_"+game_data.village.id,a),this.load(),BuildingMain.build(b),setTimeout(Quasar.main.build,1e3))}}},getMax:function(){return"undefined"==typeof premium||premium===!1?2:Number(Quasar.config.get("max_build_queue",5))},getCurrentNivel:function(a){var b=$("#buildqueue .buildorder_"+a);if(b.length>0)return Number(b.last().find("td:eq(0)").text().match(/\d+/g)[0]);var c=$("#main_buildrow_"+a),d=c.find("span:eq(0)").text().match(/\d+/g),e=Number(c.find("#newNivel").text().match(/\d+/g));if(null!==d){var f=Number(d[0]);return f==e?0:f}return 0},getStatus:function(){return Quasar.config.get("auto_build",!1)},setStatus:function(a){Quasar.config.set("auto_build",a)},load:function(){for(var a,b=Quasar.config.get("queue_"+game_data.village.id,[]),c=[],d=0;d<b.length;d++)a=b[d],""!==a&&null!==a&&"undefined"!=typeof a&&"undefined"!=typeof Quasar.game.builds[a]&&c.push(a);this.niveis={},Quasar.interface.ed_principal.cleanTables(),$("#main_order").html(""),$("#number").text(c.length);
for(var e,f,d=0;d<c.length;d++)f=c[d],e="undefined"!=typeof this.niveis[f]?Number(this.niveis[f])+1:this.getCurrentNivel(f)+1,this.niveis[f]=e,Quasar.interface.ed_principal.addToList(f,e,d);Quasar.interface.ed_principal.makeSortable()},order:function(){var a=Quasar.config.get("queue_"+game_data.village.id,[]);this.niveis={};for(var b,c,d=[],e=0;e<a.length;e++)if(c=a[e],""!=c||null!=c||"undefined"!=typeof c||"undefined"!=typeof Quasar.game.builds[c]){b=a[e],nivel="undefined"!=typeof this.niveis[b]?Number(this.niveis[b])+1:this.getCurrentNivel(b)+1,this.niveis[b]=nivel;var f=Quasar.game.builds[b],g=parseInt(f.wood*Math.pow(f.fwood,nivel-1)),h=parseInt(f.stone*Math.pow(f.fstone,nivel-1)),i=parseInt(f.iron*Math.pow(f.firon,nivel-1)),j=g+h+i;d.push([b,j])}a=[];for(var e=0;e<d.length;e++){for(var k=e;k<d.length;k++)if(d[k][1]<d[e][1]){var l=d[e];d[e]=d[k],d[k]=l}a.push(d[e][0])}Quasar.config.set("queue_"+game_data.village.id,a),Quasar.main.load()}},map:{size:0,_handleClick:null,coords:[],init:function(){this._handleClick=TWMap.map._handleClick;var a=TWMap.mapHandler.onResizeEnd;TWMap.mapHandler.onResizeEnd=function(){a(),this.doAr()},Quasar.map.UI.init(),Quasar.map.doAR()},updateAR:function(){if(!premium){var a,b,c=[],d=[],e=!0;a="overview"!==game_data.screen?$("table.vis").last().find("tbody tr"):$("table.vis").first().find("tbody tr"),$(a).each(function(){if(e)return void(e=!1);{var a=$(this),f=a.find("img").attr("src"),g=a.find("td:eq(0) span span").text();a.find("td:eq(1)").text()}g.contains("(")&&(b=g.split("(")[1].split(")")[0].replaces("|",""),f.indexOf("return")>-1?-1==c.indexOf(b)&&c.push(b):f.indexOf("attack")>-1&&-1==d.indexOf(b)&&d.push(b))}),Quasar.config.set("map_attacks",d),Quasar.config.set("map_returns",c)}},doSC:function(){for(var a=Quasar.config.get("coords_"+game_data.village.id,[]),b=0;b<a.length;b++)a[b]=Quasar.utils.coordToId(a[b].replaces("|",""));$('[id*="map_village_"]').each(function(){var b=$(this).attr("id").replace("map_village_","");if(a.indexOf(b)>-1){var c=$("#map_village_"+b);c.before('<img class="map_icon_showcoord" style="top: '+c.css("top")+"; left: "+c.css("left")+'; " id="map_icons_'+b+'" src="/graphic/dots/blue.png">')}})},doAR:function(){if(!premium){var a=Quasar.config.get("map_attacks",[]),b=Quasar.config.get("map_returns",[]),c=0;for(c=0;c<a.length;c++)a[c]=Quasar.utils.coordToId(a[c]);for(c=0;c<b.length;c++)b[c]=Quasar.utils.coordToId(b[c]);$('[id*="map_village_"]').each(function(){var c=$(this).attr("id").replace("map_village_","");if(0===$("#map_icons_"+c+".map_icon_3_1").length){var d;b.indexOf(c)>-1&&(d=$("#map_village_"+c),d.before('<img class="map_icon_return"style="top: '+d.css("top")+"; left: "+d.css("left")+';" id="map_icons_'+c+'" src="/graphic/map/return.png">')),a.indexOf(c)>-1&&(d=$("#map_village_"+c),d.before('<img class="map_icon_attack" style="position: absolute; top: '+d.css("top")+"; left: "+d.css("left")+'" id="map_icons_'+c+'" src="/graphic/map/attack.png">'))}})}},handleClick:function(a){var b=$("#quasar-colector textarea"),c=this.coordByEvent(a),d=TWMap.villages[c.join("")];if("undefined"!=typeof d)if(c=c.join("|"),Quasar.map.coords.indexOf(c)<0){Quasar.map.coords.push(c),b.val(Quasar.map.coords.join(" ")),$("#qtdCoords").text(Quasar.map.coords.length);var e=$("#map_village_"+d.id);e.before('<img class="map_icon_collect" style="top: '+e.css("top")+"; left: "+e.css("left")+'; " id="map_icons_'+d.id+'" src="/graphic/dots/red.png">')}else Quasar.map.coords.splice(c,1),b.val(Quasar.map.coords.join(" ")),$("#qtdCoords").text(Quasar.map.coords.length),$("#map_icons_"+d.id+".map_icon_collect").remove();return!1},resize:function(a){premium||(Quasar.config.set("map_size",a),TWMap.resize(a),this.size=a)},UI:{ele_quasar:null,init:function(){$("#map_config").after('<br><table class="vis" width="100%" style="border-spacing:0px;border-collapse:collapse;"><tbody id="quasarMap"><tr><th colspan="3">Quasar Options</th></tr></tbody></table><br/><table class="vis" width="100%" id="quasar-colector" style="display:none;"><tr><th>Coords(<span id="qtdCoords">0</span>)</th></tr><tr><td style="text-align:center"><textarea style="width:100%;background:none;border:none;resize:none;font-size:11px;"></textarea></td></tr></table>'),$("#fullscreen").attr("style","display: block;").attr("onclick","TWMap.premium = true; TWMap.goFullscreen();").attr("title","FullScreen - Quasar Bot"),this.ele_quasar=$("#quasarMap"),this.appendMenu('<a id="btn_colect" class="btn">'+Quasar.lang.get("colect_coords")+"</a>"),this.appendMenu('<a id="btn_showcoords" class="btn">'+Quasar.lang.get("show_coords")+"</a>"),$("#btn_colect").on("click",function(){var a=$(this).attr("class");"btn"===a?($("#quasar-colector").show(500),TWMap.map._handleClick=Quasar.map.handleClick,$(this).attr("class","btn btn-confirm-yes")):($("#quasar-colector").hide(500),$(".map_icon_collect").remove(),Quasar.map.coords=[],$("#quasar-colector textarea").val(""),$("#qtdCoords").text(Quasar.map.coords.length),TWMap.map._handleClick=Quasar.map._handleClick,$(this).attr("class","btn"))}),$("#btn_showcoords").on("click",function(){var a=$(this).attr("class");"btn"===a?(Quasar.map.doSC(),$(this).attr("class","btn btn-confirm-yes")):($(".map_icon_showcoord").remove(),$(this).attr("class","btn"))}),Quasar.map.UI.premiumChanges()},appendMenu:function(a){this.ele_quasar.append("<tr><td align='center'>"+a+"</td></tr>")},premiumChanges:function(){if(!premium){this.appendMenu(Quasar.lang.get("map_size")+': <select id="size-change" style="width: 65px"><option value="4">4x4</option><option value="5">5x5</option><option value="7">7x7</option><option value="9">9x9</option><option value="11">11x11</option><option value="13">13x13</option><option value="15">15x15</option><option value="20">20x20</option><option value="30">30x30</option></select>');var a=Quasar.config.get("map_size",13),b=$("#size-change");b.val(a),Quasar.map.resize(a),b.on("change",function(){var a=Number($(this).val());Quasar.map.resize(a)})}}}},overview:{init:function(){Quasar.map.updateAR(),Quasar.overview.UI.init()},UI:{init:function(){premium||this.premiumChanges()},premiumChanges:function(){var a='<div id="show_notes" class="vis moveable widget" style="display:none;"><h4 class="head"><img style="float: right; cursor: pointer;" src="graphic/minus.png">'+Quasar.lang.get("village_notes")+'</h4><div class="widget_content" style="display: block;"><table width="100%"><tbody><tr><td id="village_note"></td></tr><tr><td><a id="edit_notes_link" href="javascript:void(0);"> Editar</a></td></tr></tbody></table></div></div>';$("#show_summary").after(a),Quasar.overview.UI.load_notes(),$("#show_notes").show(1e3),$("#edit_notes_link").on("click",function(){Quasar.overview.UI.edit_notes($("#village_note"),Quasar.lang.get("village_notes"))})},load_notes:function(){var a=new QJSON("notes",!0),b=game_data.village.id,c=null!==a.get(b)?a.get(b):"";$("#village_note").html(c)},edit_notes:function(a,b){var c=new QJSON("notes",!0),d=game_data.village.id,e=null!==c.get(d)?c.get(d).replace(/<br>/g,"\n"):"";b=Quasar.lang.get("village_notes");var f='<div><textarea id="message" name="note" rows="10" cols="40">'+e+'</textarea></div><div><input type="button" id="ok_note" value="OK" class="btn"></div>',g=function(){$("#ok_note").on("click",function(){var a=$("#message").val().replace(/\n/g,"<br>"),b=new QJSON("notes",!0);b.set(game_data.village.id,a),Quasar.config.set("notes",b),Quasar.overview.UI.load_notes()})};Quasar.interface.menu.popupBox(b,f,400,null,g)}}},overview_villages:{init:function(){this.UI.init(),this.saveVillages()},saveVillages:function(){var a=new QJSON("villages",!0);$("#production_table .row_a, #production_table .row_b").each(function(){var b=$(this),c="[0-9]{1,3}\\|[0-9]{1,3}",d=b.find(".quickedit-label").text();d=d.match(c)[0];var e=b.find(".quickedit-vn").attr("data-id");a.set(d,e)}),Quasar.config.set("villages",a.toJSON())},changeName:function(a,b){$.post("?village="+a+"&action=change_name&h=ddbf&screen=main",{name:b},function(){console.log("FUN")})},UI:{init:function(){}}},farm_post:{can:!0,init:function(){return Quasar.farm_post.getStatus()?($(".troop_template_selector").each(function(){return $(this).click(),Quasar.farm_post.canAttack()?Quasar.farm_post.doAttack():void 0}),Quasar.utils.setReload("&screen=place"),!1):!1},canAttack:function(){var a=Quasar.config.get("coords_"+game_data.village.id,[]);return a.length<1?!1:($("input[class='unitsInput']").each(function(){var a=$(this).val(),b=$(this).parent().find("a").text();b=b.replaces("(",""),b=b.replaces(")",""),b=Number(b),null!==a&&""!==a&&a>b&&(Quasar.farm_post.can=!1)}),Quasar.farm_post.can)},cleanInputs:function(){$("input[class='unitsInput']").each(function(){var a=Number($(this).val()),b=$(this).parent().find("a:eq(1)").text();b=b.replaces("(",""),b=b.replaces(")",""),b=Number(b),null!==a&&""!==a&&0!==a&&(a>b||$(this).parent().find("a:eq(1)").text("("+(b-a)+")"))})},doAttack:function(){var a=Quasar.config.get("index_"+game_data.village.id,0)+1,b=Quasar.config.get("coords_"+game_data.village.id,[]);if(b.length<1)return!1;if(a>b.length-1){var c=Quasar.config.get("stop_end_farm",!1);if(c)return;a=0}Quasar.config.set("index_"+game_data.village.id,a),Quasar.farm.addAttack(),$("#current").text(a);var d=game_data.village.id,e=b[a],f={x:e.split("|")[0],y:e.split("|")[1],attack:!0};for(var g in Quasar.game.units){var h=Number($("#unit_input_"+g).val());f[g]=h}return Quasar.farm_post.cleanInputs(),$.ajax({url:"?village="+d+"&try=confirm&screen=place",type:"post",data:f,success:function(a){if($('img[src="?captcha"]',a).length||$("#error",a).length)return Quasar.farm_post.can=!1,!1;var b=$("form",a);$.post(b[0].action,b.serialize(),function(a){return $('img[src="?captcha"]',a).length||$("#error",a).length?(Quasar.farm_post.can=!1,!1):void 0})}}),!0},getStatus:function(){return Quasar.config.get("auto_farm_post",!1)},setStatus:function(a){Quasar.config.set("auto_farm_post",a),a&&(Quasar.farm.setStatus(!1),$("#auto_farm").removeClass("active"))}},farm:{init:function(){if(!Quasar.farm.getStatus())return!1;var a=!1;return $(".troop_template_selector").each(function(){return a?!0:($(this).click(),void(Quasar.farm.canAttack()&&(a=Quasar.farm.doAttack())))}),Quasar.utils.setReload("&screen=place"),!1},canAttack:function(){var a=!0,b=Quasar.config.get("coords_"+game_data.village.id,[]);return b.length<1?!1:($("input[class='unitsInput']").each(function(){var b=$(this).val(),c=$(this).parent().find("a").text();c=c.replaces("(",""),c=c.replaces(")",""),null!==b&&""!==b&&Number(c)<b&&(a=!1)}),a)},doAttack:function(){var a=Quasar.config.get("index_"+game_data.village.id,0)+1,b=Quasar.config.get("coords_"+game_data.village.id,[]);if(b.length<1)return!1;if(a>b.length-1){var c=Quasar.config.get("stop_end_farm",!1);if(c)return;a=0}var d=b[a];return $("input[name='input']").val(d),Quasar.config.set("index_"+game_data.village.id,a),Quasar.farm.addAttack(),setTimeout(function(){$("#target_attack").click()},Quasar.utils.random(500,2500)),!0},doConfirm:function(){setTimeout(function(){$("#troop_confirm_go").click()},Quasar.utils.random(500,2500))},addAttack:function(){var a=new QJSON("attacks",!0),b=$("#serverDate").text();if(a.contains(b)){var c=a.get(b)+1;a.set(b,c)}else a.add(b,0);Quasar.config.set("attacks",a.toJSON())},getStatus:function(){return Quasar.config.get("auto_farm",!1)},setStatus:function(a){Quasar.config.set("auto_farm",a),a&&(Quasar.farm_post.setStatus(!1),$("#auto_farm_post").removeClass("active"))}},report:{init:function(){Quasar.report.UI.init()},UI:{init:function(){$("#content_value").prepend('<div id="menu_script" style="display:none;"><table class="vis nowrap tall" style="width: 100%"><tr><th style="width: 66%">Menu</th></tr><tr><td><input id="clean" class="btn" type="button" value="Clean Villages"></td></tr></table></div>');var a="";$("btn_wall_drop").on("click",function(){Quasar.wall.attack(a[0],a[1])}),$("#menu_script").show(1e3)}},view:function(){var a=$("#attack_info_def .village_anchor a");if(!(a.length<1)){var b=a.text().split("(")[1].split(")")[0],c=$('<td><img src="/graphic/buildings/wall.png" title="Add to drop list"/></td>').on("click",function(){Quasar.wall.save(b,$(this))}),d=$('<td><img src="/graphic/map/attack.png" title="Add to farm list"/></td>').on("click",function(){var a=Quasar.config.get("coords_"+game_data.village.id,[]);!a.indexOf(b)>-1?(a.push(b),Quasar.config.set("coords_"+game_data.village.id,a),$(this).addClass("success")):$(this).addClass("fail")}),e=$('<td><img src="/graphic/map/return.png" title="Remove from farm list"/></td>').on("click",function(){var a=Quasar.config.get("coords_"+game_data.village.id,[]);a.indexOf(b)>-1?(a.splice(b,1),Quasar.config.set("coords_"+game_data.village.id,a),$(this).addClass("success")):$(this).addClass("fail")}),f=$("tr:first","#attack_results ");f.append(c),f.append(d),f.append(e)}}},wall:{init:function(){if(!Quasar.wall.getStatus())return!1;var a=this.getUnits(),b=Quasar.config.get("wall_coords",[]);if(b.length<=0||!Quasar.wall.hasUnits())return!1;Quasar.wall.cleanInputs();for(var c=0;c<a.length;c++)$("#unit_input_"+a[c][0]).val(a[c][1]);var d=Quasar.utils.orderByDis(game_data.village.coord,b),e=d[0];return $("input[name='input']").val(e),d.shift(),Quasar.config.set("wall_coords",d),$("#target_attack").click(),!0},cleanInputs:function(){$(".unitsInput").each(function(){$(this).val(0)})},getUnits:function(){var a=[];return a.push(["spy",Quasar.config.get("wall_drop_spy",1)]),a.push(["ram",Quasar.config.get("wall_drop_ram",15)]),a.push(["axe",Quasar.config.get("wall_drop_axe",30)]),a},hasUnits:function(){for(var a=this.getUnits(),b=0;b<a.length;b++){var c=$("#unit_input_"+a[b][0]).next("a").text().match(/\d+/g)[0];if(Number(c)<Number(a[b][1]))return!1}return!0},canAttack:!0,attack:function(a,b,c){if(!Quasar.wall.canAttack)return void $("#"+c).parent().addClass("fail");var d=game_data.village.id,e={x:a,y:b,attack:!0};for(var f in Quasar.game.units)e[f]=0;e.spy=Quasar.config.get("wall_drop_spy",1),e.ram=Quasar.config.get("wall_drop_ram",15),e.axe=Quasar.config.get("wall_drop_axe",45),$.ajax({url:"?village="+d+"&try=confirm&screen=place",type:"post",data:e,success:function(a){if($('img[src="?captcha"]',a).length||$("#error",a).length)return $("#"+c).parent().addClass("fail"),Quasar.wall.canAttack=!1,!1;var b=$("form",a);$.post(b[0].action,b.serialize(),function(){return $('img[src="?captcha"]',a).length||$("#error",a).length?($("#"+c).parent().addClass("fail"),Quasar.wall.canAttack=!1,!1):void $("#"+c).parent().addClass("success")})}})},save:function(a,b){var c=Quasar.config.get("wall_coords",[]);-1===c.indexOf(a)?(c.push(a),Quasar.config.set("wall_coords",c),b.addClass("success")):b.addClass("fail")},getStatus:function(){return Quasar.config.get("break_wall")},setStatus:function(a){Quasar.coordinator.getStatus()&&a&&(Quasar.coordinator.setStatus(!1),UI.SuccessMessage("O coordenador foi desativado para no gerar conflito com o derrubador de muralhas."),Quasar.coordinator.$element.removeClass("active")),Quasar.config.set("break_wall",a)}},am_farm:{jump:!1,cicle:0,rows:0,init:function(){Quasar.am_farm.UI.init(),Quasar.am_farm.getStatus()&&(Quasar.am_farm.doAttacks(),Quasar.utils.setReload("&order=distance&dir=asc&screen=am_farm"))},doAttacks:function(){var a=0,b=Quasar.config.get("am_is_by_ratio",!1),c=Number(Quasar.config.get("max_am_attacks",2)),d=Number(Quasar.config.get("am_dis_ratio",1)),e=Quasar.config.get("attack_control",!1),f=Number(Quasar.config.get("max_am_dis",20)),g=Quasar.config.get("blue_reports",!1),h=Quasar.config.get("yellow_reports",!0),i=Quasar.config.get("use_c_am",!0),j=Number(Quasar.config.get("max_am_wall",3)),k=Quasar.am_farm.getTemplateRes("0"),l=Quasar.config.get("delete_most_attacked",!1),m=$(".row_a:visible, .row_b:visible","#am_widget_Farm");m.each(function(n){var o=$(this);a+=Quasar.utils.random(300,500),setTimeout(function(){if($(".error").length>0&&$(".error").length&&(Quasar.am_farm.jump=!0),!Quasar.am_farm.jump){Quasar.am_farm.rows++;var a=Quasar.am_farm.cicle;n!=m.length-1||!b&&a>c&&b&&a>d*f||(Quasar.am_farm.cicle++,setTimeout(Quasar.am_farm.doAttacks,500));var p=(o.attr("class").split(" ")[0],o.find("td:eq(0) a")),q=o.find(".farm_icon_a"),r=o.find(".farm_icon_b"),s=o.find(".farm_icon_c"),t="[0-9]{1,3}\\|[0-9]{1,3}",u=o.find("td:eq(3) a").text().match(t)[0],v=0;o.find("td:eq(5) .res").each(function(){v+=Number($(this).text().replace(".",""))});var w=Number("?"==o.find("td:eq(6)").text()?-1:o.find("td:eq(6)").text()),x=!1,y=o.find("td:eq(2) img");y.length>0&&(x=null!==y.attr("src").match(/1.png/g)?!0:!1);var z=(null!==o.find("td:eq(1) img").attr("src").match(/green.png/g)?!0:!1,null!==o.find("td:eq(1) img").attr("src").match(/blue.png/g)?!0:!1),A=null!==o.find("td:eq(1) img").attr("src").match(/yellow.png/g)?!0:!1,B=null!==o.find("td:eq(1) img").attr("src").match(/red.png/g)?!0:!1,C=Number(o.find("#attacks").text()),D=Number(o.find("td:eq(7)").text());if(e&&C>Quasar.am_farm.cicle)return!1;if(D>f)return!1;if(b&&C>=d*D&&0!==C)return l&&p.click(),!1;if(!b&&C>=c)return l&&p.click(),!1;if(B)return p.click(),!0;if(z&&!g)return!1;if(A&&h&&-1==w||w>j)return 0===C&&Quasar.wall.save(u,o.find("#wall").parent()),!1;if(s.length>0&&i)0===C&&v>=k&&(s.click(),Quasar.farm.addAttack());else if(q.length>0&&Quasar.am_farm.hasTroop("0"))q.click(),Quasar.farm.addAttack();else{if(!(r.length>0&&Quasar.am_farm.hasTroop("1")))return!0;r.click(),Quasar.farm.addAttack()}o.hide()}},a)})},hasTroop:function(a){var b=!0;return $("form:eq("+a+") tr:eq(1) input").each(function(){var a=$(this).attr("name"),c=Number($(this).val()),d=Number($("#units_home #"+a).text());c>d&&(b=!1)}),b},getTemplateRes:function(a){return Number($("form:eq("+a+") tr:eq(1) td:eq(6)").text())},UI:{init:function(){$("#plunder_list tbody tr:eq(0) ").append('<th><img src="/graphic/buildings/wall.png?"/></th><th><img src="/graphic/command/attack.png"/></th>');var a=0;$(".row_a, .row_b").each(function(){a+=100;var b=$(this);setTimeout(function(){var a=(b.attr("class").split(" ")[0],"[0-9]{1,3}\\|[0-9]{1,3}"),c=b.find("td:eq(3) a").text().match(a)[0],d=b.find("td:eq(3) img"),e=0;d.length>0&&(d.mouseover(),e=$("#tooltip h3").text().replace(/\D/g,""),d.mouseout());var f=$('<td><img id="wall" src="/graphic/buildings/wall.png?"/></td>').on("click",function(){Quasar.wall.save(c,$(this))});b.append(f),b.append('<td id="attacks">'+e+"</td>")},a)})}},getStatus:function(){return Quasar.config.get("am_farm",!1)},setStatus:function(a){Quasar.config.set("am_farm",a)}},dodge:{init:function(){Quasar.dodge.getStatus()&&game_data.player.incomings>0&&null!==Quasar.dodge.getDodgeVillage()&&(this.UI.showAlert(),this.attack()),this.cancel(),Quasar.utils.setReload("&screen=overview")},renameAttacks:function(){if(game_data.player.premium){var a=Quasar.config.get("incoming_attacks",0);a<game_data.player.incomings&&Quasar.interface.menu.popupBox("Incoming attacks","Loading page...",1200,null,function(){$("#quasar_popup").load("?village="+game_data.village.id+"&mode=incomings&subtype=attacks&screen=overview_villages",function(a){var b=$(a);Quasar.config.set("before_identify_page",location.href),b.find("#select_all").click(),b.find("#incomings_form input[name='label']").click()})}),a!=game_data.player.incomings&&Quasar.config.set("incoming_attacks",game_data.player.incomings)}},cancel:function(){},attack:function(){var a=Quasar.dodge.getAttackTime();null!==a&&(60>=a?Quasar.dodge.sendAttack():setTimeout(function(){Quasar.dodge.sendAttack()},1e3*(a-60)))},sendAttack:function(){Quasar.interface.menu.popupBox("Dodging","Loading page...",1200,null,function(){Quasar.config.set("before_dodge_page",location.href),$("#quasar_popup").load("?village="+game_data.village.id+"&screen=place",function(a){var b=$(a),c=Quasar.dodge.getAttackVillage();null!==c&&(b.find("input[name='input']").val(c),b.find(".unitsInput").each(function(){var a=$(this),b=a.next("a").html(),c=b.substr(1).substr(0,b.length-2);a.val(c)}),b.find("#target_attack").click())})})},hasTroop:function(){var a=!1;return $(".unitsInput").each(function(){var b=$(this);return""!==b.val()&&Number(b.val())>0?(a=!0,!1):void 0}),a},UI:{showAlert:function(){if(Quasar.dodge.getStatus()&&game_data.player.incomings>0){var a=$("#dodge");a.hasClass("alert")?a.removeClass("alert"):a.addClass("alert"),setTimeout(Quasar.dodge.UI.showAlert,1e3)}}},getDodgeVillage:function(){return Quasar.config.get("dodge_target",null)},getAttackTime:function(){var a=$(".no_ignored_command:first");if(a.length>0){var b=a.find("td:eq(2) span").text();return Quasar.utils.stringToSec(b)}return null},getStatus:function(){return Quasar.config.get("dodge",!1)},setStatus:function(a){Quasar.config.set("dodge",a)}},lang:{init:function(){this.cache=Quasar.config.get("language","br")},cache:"br",get:function(a){var b=Quasar.lang[this.cache];if("undefined"==typeof b||null==b)return a;var c=b[a];return"undefined"==typeof c?a:c},br:{save:"Salvar",count:"Contador",language:"Portugues",yes:"sim",no:"nao",auto_farm:"Farmador",auto_farm_post:"Farmador Silencioso",auto_recruit:"Recrutador",anti_afk:"Anti-Captcha",auto_build:"Construtor",coordinator:"Coordenador",dodge:"Dodge",planner:"Planejador (Preview)",update_notes:"Sobre",wall_drop:"Derrubar muralha",am_farm:"Auto AS",attacks_today:"Ataques hoje",order_recruit:"Ordem",option:"Opes",units:"Unidades",opt_title:"Opes de recrutamento",build_queue:"Fila de construo",build_level:"Nivel",price:"Custo",hide_link:"Esconder",show_link:"Mostrar",builds:"Contrues",add_icon_title:"Adicionar a fila",remove_icon_title:"Remover da fila",villages:"Aldeias",order:"Ordenar",clean:"Limpar",anti_afk_msg:"Para o anti-captcha funcionar corretamente  necessario desbloquear os\npopups do site no seu navegador.",village_notes:"Notas da aldeia",colect_coords:"Coletar coordenadas",show_coords:"Mostrar coordenadas",map_size:"Tamanho do mapa",configuration:"Configuracoes",welcome_window:"Boas vindas",import_export:"Importar/Exportar"}},train:{_temp_storage:{},init:function(){if(Quasar.train.UI.init(),Quasar.train.getStatus()){if(this.fillUnitTimes(),this.isSequential())Quasar.train.sequentialRecruitment(),Quasar.train.UI.updateType();else{Quasar.train.numericalRecruitment(0),Quasar.train.UI.updateType();var a=$("input[type='submit']");a.hasClass("btn-recruit-disabled")||a.click()}Quasar.utils.setReload("&screen=train")}},fillUnitTimes:function(){var a=this;$("div.recruit_req").each(function(){var b=$(this),c=b.find("span:last"),d=c.attr("id").split("_"+unit_build_block.village_id+"_cost_time")[0],e=Quasar.utils.stringToSec(c.text()),f=b.parent().parent().find("td:eq(2)"),g=f.text().split("/")[1],h={many:g,time:e};a._temp_storage[d]=h})},isSequential:function(){return Quasar.config.get("sequential_recruitment",!0)},queueLimite:function(){return 60*Number(Quasar.config.get("max_recruit_time",8))*60},numericalRecruitment:function(a){var b=Quasar.config.get("recruitment_numerical_"+game_data.village.id,[]);if(!(b.length<1||a>b.length-1)){var c,d=b[a][0],e=Number(b[a][1]),f=Quasar.game.units[d].ed,g=this._temp_storage[d],h="undefined"!=typeof g?g.time:0,i="undefined"!=typeof g?g.many:0,j=$("#"+d+"_"+unit_build_block.village_id);if(j.length>0){var k=Number($("#"+d+"_"+unit_build_block.village_id+"_a").text().replaces(")","").replaces("(",""));if(k>0&&this.queueLimite()>0&&e>=i){c=k>=e?e:k;var l=h*c;for(console.log(d,c,"time: ",h,"queue",this.getQueueTime(f));this.getQueueTime(f)+l>this.queueLimite()&&c>0;)l=h*--c;c>0&&(j.val(c),unit_build_block._onchange())}}this.numericalRecruitment(++a)}},sequentialRecruitment:function(){var a=Quasar.config.get("recruitment_sequential_"+game_data.village.id,[]),b=Quasar.config.get("train_index_"+game_data.village.id,0);if(!(a.length<1)){b>a.length-1&&(b=0);var c=a[b],d=Quasar.game.units[c].ed,e=$("#"+c+"_"+unit_build_block.village_id);if(e.length>0){var f=Number($("#"+c+"_"+unit_build_block.village_id+"_a").text().replaces(")","").replaces("(",""));if(f>=1){var g=Number(e.val())+1,h=this._temp_times[c],i=h*g;if(this.getQueueTime(d)+i<this.queueLimite()){e.val(g),Quasar.config.set("train_index_"+game_data.village.id,++b),unit_build_block._onchange(),this.sequentialRecruitment();var j=$("input[type='submit']");return void(j.hasClass("btn-recruit-disabled")||(j.click(),setTimeout(Loader.goTo,2e3)))}}}}},getQueueTime:function(a){if($("#trainqueue_"+a).length<1)return 0;var b=0;$("#trainqueue_"+a+" .sortable_row").each(function(){var a=$(this).find("td:eq(1)").text();b+=Quasar.utils.stringToSec(a)});var c=this;return $(".recruit_unit").each(function(){var d=$(this);if(""!=d.val()&&0!=d.val()){var e=d.attr("name");Quasar.game.units[e].ed==a&&(b+=c._temp_storage[e].time)}}),b+=Quasar.utils.stringToSec($("#trainqueue_wrap_"+a+" td:eq(1)").text())},getStatus:function(){return Quasar.config.get("auto_train",!1)},setStatus:function(a){Quasar.config.set("auto_train",a)},updateRecruiment:function(){if(Quasar.train.isSequential()){var a=$("#sortable1").sortable("toArray");a.shift(),Quasar.config.set("recruitment_sequential_"+game_data.village.id,a)}else{var b=[];$("#sortable1").find("span").each(function(){var a=$(this);b.push([a.attr("id"),a.attr("data-badge")])}),Quasar.config.set("recruitment_numerical_"+game_data.village.id,b)}this.UI.updateType()},UI:{init:function(){var a=$('<table width="100%" class="content-border vis nowrap tall" style="opacity:0;"><tr><th style="width: 40%">'+Quasar.lang.get("order_recruit")+"( Limitado em "+Quasar.config.get("max_recruit_time",8)+' horas) [ <a href="#" id="import">Importar</a> | <a href="#" id="export">Exportar</a> ]</th><th style="width: 40%" >'+Quasar.lang.get("units")+'</th><th style="width: 20%"></th></tr><tr><td><div id="sortable1" style="width: 100%"><img src="graphic/buildings/barracks.png"></div></td><td><div id="sortable2"></div></td><td id="recruitmentType"></td></tr></table></br>');$("#contentContainer").before(a);var b=Quasar.train.isSequential();$sequencial=$('<label><input type="radio" name="type" '+(b?"checked":"")+">Sequncial</label>").on("click",function(){Quasar.config.set("sequential_recruitment",!0),Quasar.train.UI.updateType()}),$quantitativo=$('<label><input type="radio" name="type" '+(b?"":"checked")+">Quantitativo</label>").on("click",function(){Quasar.config.set("sequential_recruitment",!1),Quasar.train.UI.updateType()}),$recruitType=$("#recruitmentType"),$recruitType.append($sequencial),$recruitType.append("</br>"),$recruitType.append($quantitativo),Quasar.train.UI.updateType(),a.fadeTo(1e3,1)},updateType:function(){var a,b=$("#sortable1"),c=$("#sortable2"),d=null,e=null;b.html(""),c.html("");for(a in Quasar.game.units)d=Quasar.game.units[a].name,c.append('<span id="'+d+'"><img src="/graphic/unit/recruit/'+d+'.png"></span>');if(b.append('<img src="graphic/buildings/barracks.png">'),Quasar.train.isSequential()){e=Quasar.config.get("recruitment_sequential_"+game_data.village.id,[]);for(a in e)d=e[a],b.append('<span id="'+d+'"><img src="/graphic/unit/recruit/'+d+'.png"></span>');$("#sequential").attr("checked","checked")}else{e=Quasar.config.get("recruitment_numerical_"+game_data.village.id,[]);for(a in e){d=e[a][0];var f=e[a][1];b.append('<span id="'+d+'" class="badge1" data-badge="'+f+'"><img src="/graphic/unit/recruit/'+d+'.png"></span>')}$("#numerical").attr("checked","checked")}b.sortable({placeholder:"ui_active",forcePlaceholderSize:!0,cursor:"move",revert:!0,tolerance:"pointer",connectWith:"#sortable2",stop:function(a,b){$item=b.item,"sortable2"==$item.parent().attr("id")&&$item.remove(),Quasar.train.updateRecruiment()}}).disableSelection(),c.sortable({placeholder:"ui_active",forcePlaceholderSize:!0,cursor:"move",revert:!0,tolerance:"pointer",connectWith:"#sortable1",stop:function(a,b){if($item=b.item,"sortable2"!=$item.parent().attr("id")&&($item.clone().appendTo(c),!Quasar.train.isSequential()&&null==$item.attr("data-badge"))){var d=Number(prompt("Quantas unidades deseja recrutar?",1));1>d&&(d=1),$item.attr("data-badge",d),$item.addClass("badge1")}Quasar.train.updateRecruiment()}}).disableSelection()}}},utils:{IsNumeric:function(a){return a-0==a&&(""+a).replace(/^\s+|\s+$/g,"").length>0},stringToSec:function(a){if("undefined"==typeof a)return null;var b=a.split(":");if(b.length<3)return null;var c=0;return c+=60*Number(b[0])*60,c+=60*Number(b[1]),c+=Number(b[2]),Number(c)},secToString:function(a){var b=Math.floor(a/3600),c=a%3600,d=Math.floor(c/60),e=c%60,f=Math.ceil(e);return(10>b?"0"+b:b)+":"+(10>d?"0"+d:d)+":"+(10>f?"0"+f:f)},getVillageByID:function(a){for(var b=0;b<TWMap.villages.length;b++)if("undefined"!=typeof TWMap.villages[b]&&TWMap.villages[b].id==a)return TWMap.villages[b];return null},random:function(a,b){return Math.floor(Math.random()*(b-a+1))+a},coordToId:function(a){if("undefined"===TWMap)return null;var b=TWMap.villages[a];return"undefined"==typeof b?null:b.id},getNextVillage:function(){var a=new QJSON("villages",!0),b=game_data.village.coord,c=a.getIndexOf(b)+1;return c>a.length()-1&&(c=0),a.get(c)},setReload:function(a){var b=Quasar.utils.random(Number(Quasar.config.get("min_rand",300)),Number(Quasar.config.get("max_rand",900)));console.log("Reloading in "+b+" seconds"),Quasar.interface.menu.countDown(b,function(){if(game_data.player.premium&&game_data.player.villages>1)location.href=$("#village_switch_right").attr("href");else if(game_data.player.villages>1&&null!=Quasar.utils.getNextVillage()){var b=Quasar.utils.getNextVillage();location.href="?village="+b+a}else location.href=""})},getPrevVillage:function(){var a=new QJSON("villages",!0),b=game_data.village.coord,c=a.getIndexOf(b)-1;return 0>c&&(c=a.length()-1),a.get(c)},getDataOld:function(a,b){var c=localStorage.getItem(a);if(!c)return void 0==b?"":(this.setData(a,b),b);var d=c[0];switch(c=c.substring(1),d){case"b":return"true"==c;case"n":return Number(c);default:return c}},setDataOld:function(a,b){b=(typeof b)[0]+b,localStorage.setItem(a,b)},getData:function(a,b){var c=new QJSON(game_data.player.name);return null===c.get(a)?b:c.get(a)},setData:function(a,b){var c=new QJSON(game_data.player.name);c.set(a,b),c.save()},_GET:function(a,b){null===b&&(b=location.href),url=b.replace(/.*?\?/,"");for(var c=url.split("&"),d=0;d<c.length;d++)if(null!==d.match(a))return decodeURIComponent(c[d].replace(a+"=",""));return null},orderByDis:function(a,b){var c,d,e,f=[],g=a.split("|")[0],h=a.split("|")[1];for(b instanceof Array||(b=b.split(" ")),e=0;e<b.length;e++)c=b[e].split("|")[0],d=b[e].split("|")[1],f[e]=Math.sqrt(Math.pow(c-g,2)+Math.pow(d-h,2));for(e=0;e<b.length;e++)for(var i=e+1;i<b.length;i++)if(f[i]<f[e]){var j=f[i];f[i]=f[e],f[e]=j;var k=b[i];b[i]=b[e],b[e]=k}return b},clean:function(a){var b=[];a instanceof Array||(a=a.split(" "));for(var c=0;c<a.length;c++)!b.indexOf(a[c])>-1&&""!==a[c]&&b.push(a[c]);return b},tickTimer:function(a){var b=a.endTime-(getLocalTime()+timeDiff);if(0>=b){{var c=a.element.parent().parent();c.parent().parent().find("tr.sortable_row")}return c.remove(),("train"==game_data.screen||"main"==game_data.screen)&&Loader.goTo(),!0}return formatTime(a.element,b,!1),!1}},game:{builds:{main:{max:30,name:"Edifcio principal",wood:90,stone:80,iron:70,pop:5,fwood:1.26,fstone:1.275,firon:1.26,fpop:1.17},barracks:{max:25,name:"Quartel",wood:200,stone:170,iron:90,pop:7,fwood:1.26,fstone:1.28,firon:1.26,fpop:1.17},stable:{max:20,name:"Estabulo",wood:270,stone:240,iron:260,pop:8,fwood:1.26,fstone:1.28,firon:1.26,fpop:1.17},garage:{max:15,name:"Oficina",wood:300,stone:240,iron:260,pop:8,fwood:1.26,fstone:1.28,firon:1.26,fpop:1.17},church:{max:3,name:"Igreja",wood:16e3,stone:2e4,iron:5e3,pop:5e3,fwood:1.26,fstone:1.28,firon:1.26,fpop:1.55},church_f:{max:1,name:"Primeira Igreja",wood:160,stone:200,iron:50,pop:5,fwood:1.26,fstone:1.28,firon:1.26,fpop:1.55},snob:{max:1,name:"Academia",wood:15e3,stone:25e3,iron:1e4,pop:80,fwood:2,fstone:2,firon:2,fpop:1.17},smith:{max:20,name:"Ferreiro",wood:220,stone:180,iron:240,pop:20,fwood:1.26,fstone:1.275,firon:1.26,fpop:1.17},place:{max:1,name:"Praa",wood:10,stone:40,iron:30,pop:0,fwood:1.26,fstone:1.275,firon:1.26,fpop:1.17},statue:{max:1,name:"Estabulo",wood:220,stone:220,iron:220,pop:10,fwood:1.26,fstone:1.275,firon:1.26,fpop:1.17},market:{max:25,name:"Mercado",wood:100,stone:100,iron:100,pop:20,fwood:1.26,fstone:1.275,firon:1.26,fpop:1.17},wood:{max:30,name:"Bosque",wood:50,stone:60,iron:40,pop:5,fwood:1.25,fstone:1.275,firon:1.245,fpop:1.155},stone:{max:30,name:"Poo de argila",wood:65,stone:50,iron:40,pop:5,fwood:1.27,fstone:1.265,firon:1.24,fpop:1.14},iron:{max:30,name:"Mina de ferro",wood:75,stone:65,iron:70,pop:10,fwood:1.252,fstone:1.275,firon:1.24,fpop:1.17},farm:{max:30,name:"Fazenda",wood:45,stone:40,iron:30,pop:0,fwood:1.3,fstone:1.32,firon:1.29,fpop:1},storage:{max:30,name:"Armazem",wood:60,stone:50,iron:40,pop:0,fwood:1.265,fstone:1.27,firon:1.245,fpop:1.15},hide:{max:10,name:"Esconderijo",wood:50,stone:60,iron:50,pop:2,fwood:1.25,fstone:1.25,firon:1.25,fpop:1.17},wall:{max:20,name:"Muralha",wood:50,stone:100,iron:20,pop:5,fwood:1.26,fstone:1.275,firon:1.26,fpop:1.17}},units:{spear:{wood:50,stone:30,iron:10,pop:1,time:1020,ed:"barracks",name:"spear"},sword:{wood:30,stone:30,iron:70,pop:1,time:1500,ed:"barracks",name:"sword"},axe:{wood:60,stone:30,iron:40,pop:1,time:1320,ed:"barracks",name:"axe"},archer:{wood:100,stone:30,iron:60,pop:1,time:1800,ed:"barracks",name:"archer"},spy:{wood:50,stone:50,iron:20,pop:2,time:900,ed:"stable",name:"spy"},light:{wood:100,stone:125,iron:250,pop:4,time:1800,ed:"stable",name:"light"},marcher:{wood:250,stone:100,iron:150,pop:5,time:2700,ed:"stable",name:"marcher"},heavy:{wood:200,stone:150,iron:600,pop:6,time:3600,ed:"stable",name:"heavy"},ram:{wood:300,stone:200,iron:200,pop:5,time:4800,ed:"garage",name:"ram"},catapult:{wood:320,stone:400,iron:100,pop:8,time:7200,ed:"garage",name:"catapult"}}}};
